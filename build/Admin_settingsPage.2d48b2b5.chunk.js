(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[5895],{3101:(nt,U,t)=>{"use strict";t.d(U,{G4:()=>H,Te:()=>dt});var e=t(92686),m=t(67294),l=t(32638),T=t(57557),g=t.n(T),h=t(96854);const O=(v,c)=>({...v,fieldsToPick:c});var R=t(18172),I=t(78718),z=t.n(I),X=t(36968),f=t.n(X),C=t(98601),y=t.n(C);const G={fieldsToPick:[],formErrors:{},initialData:{},isLoading:!0,modifiedData:{},showHeaderButtonLoader:!1,showHeaderLoader:!0},n=(v,c)=>(0,R.ZP)(v,p=>{switch(c.type){case"GET_DATA_SUCCEEDED":{p.isLoading=!1,p.showHeaderLoader=!1,p.initialData=z()(c.data,v.fieldsToPick),p.modifiedData=z()(c.data,v.fieldsToPick);break}case"ON_CANCEL":{p.modifiedData=v.initialData,p.formErrors={};break}case"ON_CHANGE":{c.inputType==="password"&&!c.value?y()(p.modifiedData,c.keys.split(".")):c.keys.includes("username")&&!c.value?f()(p.modifiedData,c.keys.split("."),null):f()(p.modifiedData,c.keys.split("."),c.value);break}case"ON_SUBMIT":{p.showHeaderButtonLoader=!0;break}case"ON_SUBMIT_SUCCEEDED":{p.initialData=z()(c.data,v.fieldsToPick),p.modifiedData=z()(c.data,v.fieldsToPick),p.showHeaderButtonLoader=!1;break}case"SET_ERRORS":{p.formErrors=c.errors,p.showHeaderButtonLoader=!1;break}default:return p}}),H=(v,c,p,w)=>{const[{formErrors:Z,initialData:ct,isLoading:$,modifiedData:b,showHeaderButtonLoader:tt,showHeaderLoader:ut},V]=(0,m.useReducer)(n,G,()=>O(G,w)),B=(0,l.useNotification)(),{lockApp:et,unlockApp:yt}=(0,l.useOverlayBlocker)(),{get:Lt,put:ft}=(0,l.useFetchClient)();return(0,m.useEffect)(()=>{v&&(async()=>{try{const{data:{data:F}}=await Lt(v);V({type:"GET_DATA_SUCCEEDED",data:F,fieldsToPick:w})}catch(F){console.error(F.response),B({type:"warning",message:{id:"notification.error"}})}})()},[v]),[{formErrors:Z,initialData:ct,isLoading:$,modifiedData:b,showHeaderButtonLoader:tt,showHeaderLoader:ut},V,{handleCancel:()=>{V({type:"ON_CANCEL"})},handleChange:({target:{name:q,value:F,type:D}})=>{V({type:"ON_CHANGE",inputType:D,keys:q,value:F})},handleSubmit:async q=>{q.preventDefault();const F=await(0,h.R6)(b,c);if(V({type:"SET_ERRORS",errors:F||{}}),!F)try{et(),V({type:"ON_SUBMIT"});const D=g()(b,["confirmPassword","registrationToken"]);D.roles&&(D.roles=D.roles.map(mt=>mt.id)),D.ssoLockedRoles&&(D.ssoLockedRoles=[...new Set(D.ssoLockedRoles)]);const{data:{data:N}}=await ft(v,D);p(N),V({type:"ON_SUBMIT_SUCCEEDED",data:N}),B({type:"success",message:{id:"notification.success.saved"}})}catch(D){const N=D?.response?.payload??{data:{}};N?.data&&typeof N.data=="string"?B({type:"warning",message:N.data}):B({type:"warning",message:N.message});const mt=(0,h.Iz)(N);V({type:"SET_ERRORS",errors:mt})}finally{yt()}},setField:(q,F)=>{V({type:"ON_CHANGE",keys:q,value:F})}}]};var it=t(86706),pt=t(36364),lt=t(48232);const ht={global:[{intlLabel:{id:"Settings.application.title",defaultMessage:"Overview"},to:"/settings/application-infos",id:"000-application-infos",permissions:[]},{intlLabel:{id:"Settings.webhooks.title",defaultMessage:"Webhooks"},to:"/settings/webhooks",id:"webhooks"},{intlLabel:{id:"Settings.apiTokens.title",defaultMessage:"API Tokens"},to:"/settings/api-tokens?sort=name:ASC",id:"api-tokens"},{intlLabel:{id:"Settings.transferTokens.title",defaultMessage:"Transfer Tokens"},to:"/settings/transfer-tokens?sort=name:ASC",id:"transfer-tokens"}],admin:[{intlLabel:{id:"global.roles",defaultMessage:"Roles"},to:"/settings/roles",id:"roles"},{intlLabel:{id:"global.users"},to:"/settings/users?pageSize=10&page=1&sort=firstname",id:"users"}]},W=v=>v.map(c=>{const p=c.links.map(w=>({...w,isDisplayed:!1}));return{...c,links:p}});var ot=t(89734),K=t.n(ot);const vt=v=>K()(v,c=>c.id),dt=()=>{const[{isLoading:v,menu:c},p]=(0,m.useState)({isLoading:!0,menu:[]}),{allPermissions:w}=(0,l.useRBACProvider)(),{shouldUpdateStrapi:Z}=(0,l.useAppInfo)(),{settings:ct}=(0,l.useStrapiApp)(),$=(0,it.v9)(pt._),{global:b,admin:tt}=(0,lt.c)(ht,async()=>(await t.e(3683).then(t.bind(t,53683))).LINKS_EE,{combine(B,et){return{admin:[...et.admin,...B.admin],global:[...B.global,...et.global]}},defaultValue:{admin:[],global:[]}}),ut=(0,m.useCallback)(B=>{if(!B.id)throw new Error("The settings menu item must have an id attribute.");return{...B,permissions:$.settings?.[B.id]?.main}},[$.settings]);(0,m.useEffect)(()=>{const B=async()=>{const Mt=await(Ct=>Promise.all(Ct.reduce((st,Et,q)=>{const F=D=>D.map(async(N,mt)=>({hasPermission:await(0,l.hasPermissions)(w,N.permissions),sectionIndex:q,linkIndex:mt}));return[...st,...F(Et.links)]},[])))(Lt);p(Ct=>({...Ct,isLoading:!1,menu:Lt.map((st,Et)=>({...st,links:st.links.map((q,F)=>{const D=Mt.find(N=>N.sectionIndex===Et&&N.linkIndex===F);return{...q,isDisplayed:Boolean(D.hasPermission)}})}))}))},{global:et,...yt}=ct,Lt=W([{...ct.global,links:vt([...ct.global.links,...b.map(ut)]).map(ft=>({...ft,hasNotification:ft.id==="000-application-infos"&&Z}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:tt.map(ut)},...Object.values(yt)]);B()},[tt,b,w,ct,Z,ut]);const V=B=>({...B,links:B.links.filter(et=>et.isDisplayed)});return{isLoading:v,menu:c.map(V)}}},92686:(nt,U,t)=>{"use strict";t.d(U,{G:()=>T});var e=t(67294),m=t(32638),l=t(88767);function T(){const{get:g}=(0,m.useFetchClient)(),{formatAPIError:h}=(0,m.useAPIErrorHandler)(),M=(0,m.useNotification)(),O=(0,l.useQueries)(["components","content-types"].map(C=>({queryKey:["content-manager",C],async queryFn(){const{data:{data:y}}=await g(`/content-manager/${C}`);return y},onError(y){M({type:"warning",message:h(y)})}}))),[R,I]=O,z=R.isLoading||I.isLoading,X=e.useMemo(()=>(I?.data??[]).filter(C=>C.kind==="collectionType"&&C.isDisplayed),[I?.data]),f=e.useMemo(()=>(I?.data??[]).filter(C=>C.kind!=="collectionType"&&C.isDisplayed),[I?.data]);return{isLoading:z,components:e.useMemo(()=>R?.data??[],[R?.data]),collectionTypes:X,singleTypes:f}}},39223:(nt,U,t)=>{"use strict";t.r(U),t.d(U,{SettingsPage:()=>ye});var e=t(67294),m=t(71590),l=t(32638),T=t(64593),g=t(86896),h=t(16550),M=t(3101),O=t(48232),R=t(95187),I=t(14155),z=t(56233),X=t(88291),f=t(61499),C=t(21660),y=t(36636),G=t(45697),n=t.n(G),Y=t(73727);const H=({menu:s})=>{const{formatMessage:o}=(0,g.Z)(),{trackUsage:i}=(0,l.useTracking)(),{pathname:a}=(0,h.TH)(),L=s.filter(d=>!d.links.every(r=>r.isDisplayed===!1)).map(d=>({...d,title:d.intlLabel,links:d.links.map(r=>({...r,title:r.intlLabel,name:r.id}))})),S=o({id:"global.settings",defaultMessage:"Settings"}),E=(d=null)=>{i("willNavigate",{from:a,to:d})};return e.createElement(z.m,{ariaLabel:S},e.createElement(X.p,{label:S}),e.createElement(f.Z,null,L.map(d=>e.createElement(C.D,{key:d.id,label:o(d.intlLabel)},d.links.map(r=>e.createElement(y.E,{as:Y.OL,withBullet:r.hasNotification,to:r.to,onClick:()=>E(r.to),key:r.id},o(r.intlLabel)))))))};H.propTypes={menu:n().array.isRequired};const it=H,pt=[{async Component(){return await t.e(3455).then(t.bind(t,7513))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(2544)]).then(t.bind(t,25545))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(2544)]).then(t.bind(t,25545))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(2544)]).then(t.bind(t,63727))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(5199).then(t.bind(t,87901))},to:"/settings/users",exact:!0},{async Component(){return await t.e(4263).then(t.bind(t,93552))},to:"/settings/users/:id",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,71589))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await t.e(5162).then(t.bind(t,10372))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(4121).then(t.bind(t,38542))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(8056).then(t.bind(t,71362))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(2458),t.e(4299)]).then(t.bind(t,1880))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(2458),t.e(92)]).then(t.bind(t,50955))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(3467),t.e(4816)]).then(t.bind(t,81524))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(9600).then(t.bind(t,68446))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(9508),t.e(4782),t.e(3467),t.e(2492)]).then(t.bind(t,63252))},to:"/settings/transfer-tokens/:id",exact:!0}];var lt=t(40720),ht=t(74863),rt=t(90731),W=t(12473),ot=t(34726),K=t(96987),A=t(71068),vt=t(31988),k=t(6498),dt=t(29824),v=t(18226),c=t(62577),p=t(88767),w=t(86706),Z=t(83171),ct=t(36364),$=t(16607);const b=750,tt=100,ut=["image/jpeg","image/png","image/svg+xml"];var V=t(32502),B=t(7677),et=t(96208),yt=t(68020),Lt=t(83598),ft=t(75975),Mt=t(74622),Ct=t(36854),st=t(18172);const Et={localImage:void 0},F=(s=Et,o)=>(0,st.ZP)(s,i=>{switch(o.type){case"SET_LOCAL_IMAGE":{i.localImage=o.value;break}default:return i}}),D=({onChangeLogo:s,customLogo:o,goTo:i,Component:a,modalTitle:u,next:L,prev:S,currentStep:E})=>{const[{localImage:d},r]=(0,e.useReducer)(F,Et),{formatMessage:j}=(0,g.Z)(),x=J=>{r({type:"SET_LOCAL_IMAGE",value:J})},Q=()=>{i(null)};return E?e.createElement(Mt.P,{labelledBy:"modal",onClose:Q},e.createElement(Ct.x,null,e.createElement(A.Z,{fontWeight:"bold",as:"h2",id:"modal"},j(u))),e.createElement(a,{setLocalImage:x,goTo:i,next:L,prev:S,onClose:Q,asset:d||o,onChangeLogo:s})):null};D.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},D.propTypes={Component:n().elementType,currentStep:n().string,customLogo:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}),goTo:n().func.isRequired,modalTitle:n().shape({id:n().string,defaultMessage:n().string}),next:n().string,onChangeLogo:n().func.isRequired,prev:n().string};const N=D,mt={currentStep:void 0},$t=(s=mt,o)=>(0,st.ZP)(s,i=>{switch(o.type){case"GO_TO":{i.currentStep=o.to;break}default:return i}});var Gt=t(98948),St=t(91788),Ht=t(26910),xt=t(94955),bt=t(45094),Vt=t(78048),Qt=t(85200),Jt=t(61456),Tt=t(37022),Xt=t(73734),Yt=t(1565);const kt={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Ut={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},wt=s=>new Promise(o=>{const i=new FileReader;i.onload=()=>{const a=new Image;a.onload=function(){o({width:a.width,height:a.height})},a.src=i.result},i.readAsDataURL(s)}),qt=(s,o)=>({ext:s.name.split(".").pop(),size:s.size/1e3,name:s.name,url:URL.createObjectURL(s),rawFile:s,width:o.width,height:o.height}),jt=async s=>{let o;if(!ut.includes(s.type))throw o=new Error("File format"),o.displayMessage=kt,o;const a=await wt(s);if(!(a.width<=b&&a.height<=b))throw o=new Error("File sizing"),o.displayMessage=Ut,o;const L=qt(s,a);if(!(L.size<=tt))throw o=new Error("File sizing"),o.displayMessage=Ut,o;return L},_t=(0,Yt.ZP)(bt._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Rt=({setLocalImage:s,goTo:o,next:i,onClose:a})=>{const{formatMessage:u}=(0,g.Z)(),[L,S]=(0,e.useState)(!1),[E,d]=(0,e.useState)(void 0),r=(0,e.useRef)(null),j=()=>S(!0),x=()=>S(!1),Q=at=>{at.preventDefault(),r.current.click()},J=async()=>{x();const at=r.current.files[0];if(at)try{const gt=await jt(at);s(gt),o(i)}catch(gt){if(gt.displayMessage)d(u(gt.displayMessage,{size:tt,dimension:b})),r.current.focus();else throw gt}},_=()=>L?"primary500":E?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement($.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(Vt.g,{name:"logo-upload",error:E},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(K.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(K.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:L?"primary100":"neutral100",borderColor:_(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:j,onDragLeave:x},e.createElement(Qt.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Xt.Z,"aria-hidden":!0}),e.createElement($.x,{paddingTop:3,paddingBottom:5},e.createElement(A.Z,{variant:"delta",as:"span"},u({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(_t,{accept:ut,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:J,ref:r,id:"logo-upload"}),e.createElement(W.z,{type:"button",onClick:Q},u({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement($.x,{paddingTop:6},e.createElement(A.Z,{variant:"pi",textColor:"neutral600"},u({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:tt,dimension:b})))),e.createElement(Jt.c,null)))))),e.createElement(Tt.m,{startActions:e.createElement(W.z,{onClick:a,variant:"tertiary"},u({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};Rt.defaultProps={next:null},Rt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const te=Rt;var ee=t(38670);const ne=async s=>{try{const{get:o}=(0,l.getFetchClient)(),i=await o(s,{responseType:"blob",timeout:8e3});return new File([i.data],i.config.url,{type:i.headers["content-type"]})}catch(o){throw o.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},o}},Dt=({goTo:s,next:o,onClose:i,setLocalImage:a})=>{const{formatMessage:u}=(0,g.Z)(),[L,S]=(0,e.useState)(""),[E,d]=(0,e.useState)(null),r=x=>{S(x.target.value)},j=async()=>{try{const x=await ne(L),Q=await jt(x);a(Q),s(o)}catch(x){if(x.displayMessage)d(u(x.displayMessage,{size:tt,dimension:b}));else throw x}};return e.createElement("form",{onSubmit:x=>{x.preventDefault(),j()}},e.createElement($.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(ee.o,{label:u({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:E,onChange:r,value:L,name:"logo-url"})),e.createElement(Tt.m,{startActions:e.createElement(W.z,{onClick:i,variant:"tertiary"},u({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(W.z,{type:"submit"},u({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};Dt.defaultProps={next:null},Dt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const oe=Dt,Pt=({setLocalImage:s,goTo:o,next:i,onClose:a})=>{const{formatMessage:u}=(0,g.Z)();return e.createElement(Gt.v,{label:u({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement($.x,{paddingLeft:8,paddingRight:8},e.createElement(St.m,null,e.createElement(St.O,null,u({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(St.O,null,u({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Ht.i,null)),e.createElement(xt.n,null,e.createElement(xt.x,null,e.createElement(te,{onClose:a,setLocalImage:s,goTo:o,next:i})),e.createElement(xt.x,null,e.createElement(oe,{onClose:a,setLocalImage:s,goTo:o,next:i}))))};Pt.defaultProps={next:null},Pt.propTypes={goTo:n().func.isRequired,next:n().string,onClose:n().func.isRequired,setLocalImage:n().func.isRequired};const se=Pt;var ae=t(16244),ie=t(60909),le=t(26611),re=t(37255),de=t(19700),zt=t(56457),ce=t(1136);const Ft=({asset:s})=>{const{formatMessage:o}=(0,g.Z)();return e.createElement(ae.Z,null,e.createElement(ie.O,null,e.createElement(le.H,{size:"S",src:s.url})),e.createElement(re.e,null,e.createElement(de.a,null,e.createElement(zt.l,null,s.name),e.createElement(zt._,null,`${s.ext.toUpperCase()} - ${s.width}\u2715${s.height}`)),e.createElement(ce.E,null,o({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};Ft.propTypes={asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired};const ue=Ft,Ot=({onClose:s,asset:o,prev:i,next:a,goTo:u,setLocalImage:L,onChangeLogo:S})=>{const{formatMessage:E}=(0,g.Z)(),d=()=>{L(void 0),u(i)},r=()=>{S(o),u(a)};return e.createElement(e.Fragment,null,e.createElement($.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(K.k,{justifyContent:"space-between",paddingBottom:6},e.createElement(K.k,{direction:"column",alignItems:"flex-start"},e.createElement(A.Z,{variant:"pi",fontWeight:"bold"},E({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(A.Z,{variant:"pi",textColor:"neutral500"},E({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(W.z,{onClick:d,variant:"secondary"},E({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement($.x,{maxWidth:(0,l.pxToRem)(180)},o.url?e.createElement(ue,{asset:o}):null)),e.createElement(Tt.m,{startActions:e.createElement(W.z,{onClick:s,variant:"tertiary"},E({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(W.z,{onClick:r},E({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Ot.defaultProps={next:null,prev:null},Ot.propTypes={goTo:n().func.isRequired,asset:n().shape({name:n().string,url:n().string,width:n().number,height:n().number,ext:n().string}).isRequired,next:n().string,onClose:n().func.isRequired,onChangeLogo:n().func.isRequired,prev:n().string,setLocalImage:n().func.isRequired};const me={upload:{Component:se,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Ot,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},It=({canUpdate:s,customLogo:o,defaultLogo:i,hint:a,label:u,onChangeLogo:L,onResetLogo:S})=>{const[{currentStep:E},d]=(0,e.useReducer)($t,mt),{Component:r,next:j,prev:x,modalTitle:Q}=me[E]||{},{formatMessage:J}=(0,g.Z)(),_=at=>{d({type:"GO_TO",to:at})};return e.createElement(e.Fragment,null,e.createElement(V.F,{label:u,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:o?.name||"logo.png",actions:e.createElement(B.b,null,e.createElement(et.h,{disabled:!s,onClick:()=>_(o?"pending":"upload"),label:J({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(Lt.Z,null)}),o&&e.createElement(et.h,{disabled:!s,onClick:S,label:J({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(ft.Z,null)}))},e.createElement(yt.q,{label:J({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement($.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:o?.url||i,alt:J({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(N,{Component:r,currentStep:E,onChangeLogo:L,customLogo:o,goTo:_,next:j,prev:x,modalTitle:Q}))};It.defaultProps={canUpdate:!1,customLogo:null,hint:null},It.propTypes={canUpdate:n().bool,customLogo:n().shape({url:n().string,name:n().string}),label:n().string.isRequired,hint:n().string,defaultLogo:n().string.isRequired,onChangeLogo:n().func.isRequired,onResetLogo:n().func.isRequired};const Zt=It;var ge=t(82492),pe=t.n(ge);const he=(s,o)=>pe()(s,{menuLogo:{display:o.menuLogo},authLogo:{display:o.authLogo}}),At={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},fe=(s=At,o)=>(0,st.ZP)(s,i=>{switch(o.type){case"SET_CUSTOM_MENU_LOGO":{i.menuLogo.display=o.value,i.menuLogo.submit.rawFile=o.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{i.authLogo.display=o.value,i.authLogo.submit.rawFile=o.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{i.menuLogo.display=null,i.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{i.authLogo.display=null,i.authLogo.submit={rawFile:null,isReset:!0};break}default:return i}}),Bt=(0,e.forwardRef)(({canUpdate:s,projectSettingsStored:o},i)=>{const{formatMessage:a}=(0,g.Z)(),{trackUsage:u}=(0,l.useTracking)(),{logos:{menu:L,auth:S}}=(0,Z.m)(),[{menuLogo:E,authLogo:d},r]=(0,e.useReducer)(fe,At,()=>he(At,o)),j=_=>{r({type:"SET_CUSTOM_MENU_LOGO",value:_})},x=()=>{u("didClickResetLogo",{logo:"menu"}),r({type:"RESET_CUSTOM_MENU_LOGO"})},Q=_=>{r({type:"SET_CUSTOM_AUTH_LOGO",value:_})},J=()=>{u("didClickResetLogo",{logo:"auth"}),r({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,e.useImperativeHandle)(i,()=>({getValues:()=>({menuLogo:E.submit,authLogo:d.submit})})),e.createElement($.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(A.Z,{variant:"delta",as:"h3"},a({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(A.Z,{variant:"pi",textColor:"neutral600"},a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:b,size:tt})),e.createElement(vt.r,{paddingTop:4,gap:4},e.createElement(k.P,{col:6,s:12},e.createElement(Zt,{canUpdate:s,customLogo:E.display,defaultLogo:L.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:j,onResetLogo:x})),e.createElement(k.P,{col:6,s:12},e.createElement(Zt,{canUpdate:s,customLogo:d.display,defaultLogo:S.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:Q,onResetLogo:J}))))});Bt.defaultProps={canUpdate:!1,projectSettingsStored:null},Bt.propTypes={canUpdate:n().bool,projectSettingsStored:n().shape({menuLogo:n().shape({url:n().string,name:n().string})})};const Ee=Bt,ve=s=>{const o=new FormData;return Object.entries(s).forEach(([i,a])=>{a&&a.rawFile instanceof File&&o.append(i,a.rawFile),a&&a.isReset&&o.append(i,null)}),o},Le=()=>null,Ce=()=>{const s=e.useRef(),o=(0,l.useNotification)(),{trackUsage:i}=(0,l.useTracking)(),{formatMessage:a}=(0,g.Z)(),{get:u,post:L}=(0,l.useFetchClient)(),{updateProjectSettings:S}=(0,Z.m)(),E=(0,w.v9)(ct._),{formatAPIError:d}=(0,l.useAPIErrorHandler)(),{communityEdition:r,latestStrapiReleaseTag:j,nodeVersion:x,shouldUpdateStrapi:Q,strapiVersion:J}=(0,l.useAppInfo)(),_=(0,O.c)(Le,async()=>(await t.e(5013).then(t.bind(t,65013))).AdminSeatInfoEE),{allowedActions:{canRead:at,canUpdate:gt}}=(0,l.useRBAC)(E.settings["project-settings"]);(0,l.useFocusWhenNavigate)();const{data:Nt,isLoading:Me}=(0,p.useQuery)(["project-settings"],async()=>{const{data:P}=await u("/admin/project-settings");return P},{cacheTime:0,enabled:at,select(P){return{...P,authLogo:P.authLogo?{...P.authLogo,url:(0,l.prefixFileUrlWithBackendUrl)(P.authLogo.url)}:P.authLogo,menuLogo:P.menuLogo?{...P.menuLogo,url:(0,l.prefixFileUrlWithBackendUrl)(P.menuLogo.url)}:P.menuLogo}}}),Se=(0,p.useMutation)(P=>L("/admin/project-settings",P,{headers:{"Content-Type":"multipart/form-data"}}),{onError(P){o({type:"warning",message:d(P)})},async onSuccess(P){const{menuLogo:Wt,authLogo:Kt}=P;S({menuLogo:Wt?.url,authLogo:Kt?.url}),Wt?.rawFile&&i("didChangeLogo",{logo:"menu"}),Kt?.rawFile&&i("didChangeLogo",{logo:"auth"}),o({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),xe=P=>{P.preventDefault(),Se.mutate(ve(s.current.getValues()))};return _?e.createElement(m.A,null,e.createElement(l.SettingsPageTitle,{name:"Application"}),e.createElement(lt.o,null,Me?e.createElement(ht.a,null,a({id:"Settings.application.isLoading",defaultMessage:"Loading"})):e.createElement("form",{onSubmit:xe},e.createElement(rt.T,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:gt&&e.createElement(W.z,{type:"submit",startIcon:e.createElement(v.Z,null)},a({id:"global.save",defaultMessage:"Save"}))}),e.createElement(ot.D,null,e.createElement(K.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(K.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(A.Z,{variant:"delta",as:"h3"},a({id:"global.details",defaultMessage:"Details"})),e.createElement(vt.r,{gap:5,as:"dl"},e.createElement(k.P,{col:6,s:12},e.createElement(A.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(K.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(A.Z,null,"v",J),Q&&e.createElement(dt.r,{href:`https://github.com/strapi/strapi/releases/tag/${j}`,isExternal:!0,endIcon:e.createElement(c.Z,null)},a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})))),e.createElement(k.P,{col:6,s:12},e.createElement(A.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(K.k,{gap:3,direction:"column",alignItems:"start",as:"dd"},e.createElement(A.Z,null,a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:r})),e.createElement(dt.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(c.Z,null)},a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(k.P,{col:6,s:12},e.createElement(A.Z,{variant:"sigma",textColor:"neutral600",as:"dt"},a({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(A.Z,{as:"dd"},x)),e.createElement(_,null))),at&&Nt&&e.createElement(Ee,{canUpdate:gt,ref:s,projectSettingsStored:Nt})))))):null};function ye(){const{settingId:s}=(0,h.UO)(),{settings:o}=(0,l.useStrapiApp)(),{formatMessage:i}=(0,g.Z)(),{isLoading:a,menu:u}=(0,M.Te)(),L=(0,O.c)(pt,async()=>(await t.e(1470).then(t.bind(t,51470))).ROUTES_EE,{combine(d,r){return[...d,...r]},defaultValue:[]}),S=e.useMemo(()=>(0,I.Z)(L.map(({to:d,Component:r,exact:j})=>(0,R.Z)(r,d,j))),[L]),E=Object.values(o).flatMap(d=>{const{links:r}=d;return r.map(j=>(0,R.Z)(j.Component,j.to,j.exact||!1))});return a?e.createElement(l.LoadingIndicatorPage,null):s?e.createElement(m.A,{sideNav:e.createElement(it,{menu:u})},e.createElement(T.q,{title:i({id:"global.settings",defaultMessage:"Settings"})}),e.createElement(h.rs,null,e.createElement(h.AW,{path:"/settings/application-infos",component:Ce,exact:!0}),S,E)):e.createElement(h.l_,{to:"/settings/application-infos"})}},98601:(nt,U,t)=>{var e=t(57406);function m(l,T){return l==null?!0:e(l,T)}nt.exports=m},56233:(nt,U,t)=>{"use strict";t.d(U,{m:()=>h});var e=t(85893),m=t(1565),l=t(31988);const T=`${232/16}rem`,g=(0,m.ZP)(l.r)`
  width: ${T};
  background: ${({theme:M})=>M.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:M})=>M.colors.neutral200};
  z-index: 1;
`,h=({ariaLabel:M,...O})=>(0,e.jsx)(g,{"aria-label":M,as:"nav",...O})},88291:(nt,U,t)=>{"use strict";t.d(U,{p:()=>G});var e=t(85893),m=t(67294),l=t(90272),T=t(1565),g=t(40840),h=t(92058),M=t(61682),O=t(26910),R=t(16607),I=t(49185),z=t(35987),X=t(96987),f=t(71068),C=t(96208);const y=(0,T.ZP)(O.i)`
  width: ${24/16}rem;
  background-color: ${({theme:n})=>n.colors.neutral200};
`,G=({as:n="h2",label:Y,searchLabel:H="",searchable:it=!1,onChange:pt=()=>{},value:lt="",onClear:ht=()=>{},onSubmit:rt=()=>{},id:W})=>{const[ot,K]=(0,m.useState)(!1),A=(0,M.D)(ot),vt=(0,h.M)(W),k=(0,m.useRef)(void 0),dt=(0,m.useRef)(void 0);(0,m.useEffect)(()=>{ot&&k.current&&k.current.focus(),A&&!ot&&dt.current&&dt.current.focus()},[ot,A]);const v=()=>{K(Z=>!Z)},c=Z=>{ht(Z),k.current.focus()},p=Z=>{Z.relatedTarget?.id!==vt&&K(!1)},w=Z=>{Z.key===g.y.ESCAPE&&K(!1)};return ot?(0,e.jsxs)(R.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,e.jsx)(I.U,{children:(0,e.jsx)(z.w,{name:"searchbar",value:lt,onChange:pt,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:w,ref:k,onBlur:p,onClear:c,onSubmit:rt,clearLabel:"Clear",size:"S",children:H})}),(0,e.jsx)(R.x,{paddingLeft:2,paddingTop:4,children:(0,e.jsx)(y,{})})]}):(0,e.jsxs)(R.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,e.jsxs)(X.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,e.jsx)(f.Z,{variant:"beta",as:n,children:Y}),it&&(0,e.jsx)(C.h,{ref:dt,onClick:v,label:H,icon:(0,e.jsx)(l.Z,{})})]}),(0,e.jsx)(R.x,{paddingTop:4,children:(0,e.jsx)(y,{})})]})}},36636:(nt,U,t)=>{"use strict";t.d(U,{E:()=>X});var e=t(85893),m=t(67294),l=t(59233),T=t(1565),g=t(16607),h=t(71068),M=t(96987),O=t(53342);const R=(0,T.ZP)(g.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:f})=>f.colors.neutral800};
  svg > * {
    fill: ${({theme:f})=>f.colors.neutral600};
  }

  &.active {
    ${({theme:f})=>`
      background-color: ${f.colors.primary100};
      border-right: 2px solid ${f.colors.primary600};
      svg > * {
        fill: ${f.colors.primary700};
      }
      ${h.Z} {
        color: ${f.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,I=(0,T.ZP)(l.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:f,$active:C})=>C?f.colors.primary600:f.colors.neutral600};
  }
`,z=T.ZP.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,X=m.forwardRef(({children:f,icon:C=null,withBullet:y=!1,as:G=O.f,isSubSectionChild:n=!1,...Y},H)=>(0,e.jsxs)(R,{as:G,icon:C,background:"neutral100",paddingLeft:n?9:7,paddingBottom:2,paddingTop:2,ref:H,...Y,children:[(0,e.jsxs)(M.k,{children:[C?(0,e.jsx)(z,{children:C}):(0,e.jsx)(I,{}),(0,e.jsx)(g.x,{paddingLeft:2,children:(0,e.jsx)(h.Z,{as:"span",children:f})})]}),y&&(0,e.jsx)(g.x,{as:M.k,paddingRight:4,children:(0,e.jsx)(I,{$active:!0})})]}))},21660:(nt,U,t)=>{"use strict";t.d(U,{D:()=>C});var e=t(85893),m=t(67294),l=t(1565),T=t(58471),g=t(96987),h=t(16607),M=t(71068);const O=(0,l.ZP)(g.k)`
  border: none;
  padding: 0;
  background: transparent;
`,R=l.ZP.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:y})=>y?"0deg":"180deg"});
`,I=({collapsable:y=!1,label:G,onClick:n=()=>{},ariaExpanded:Y,ariaControls:H})=>y?(0,e.jsxs)(O,{as:"button",onClick:n,"aria-expanded":Y,"aria-controls":H,textAlign:"left",children:[(0,e.jsx)(h.x,{paddingRight:1,children:(0,e.jsx)(M.Z,{variant:"sigma",textColor:"neutral600",children:G})}),y&&(0,e.jsx)(R,{rotated:Y,children:(0,e.jsx)(T.Z,{"aria-hidden":!0})})]}):(0,e.jsx)(O,{children:(0,e.jsx)(h.x,{paddingRight:1,children:(0,e.jsx)(M.Z,{variant:"sigma",textColor:"neutral600",children:G})})});var z=t(92058),X=t(18787);const f=(0,l.ZP)(h.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:y})=>y.colors.neutral500};
    }
  }
`,C=({collapsable:y=!1,label:G,badgeLabel:n,children:Y,id:H})=>{const[it,pt]=(0,m.useState)(!0),lt=(0,z.M)(H),ht=()=>{pt(rt=>!rt)};return(0,e.jsxs)(g.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,e.jsx)(f,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,e.jsxs)(h.x,{position:"relative",paddingRight:n?6:0,children:[(0,e.jsx)(I,{onClick:ht,ariaExpanded:it,ariaControls:lt,collapsable:y,label:G}),n&&(0,e.jsx)(X.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:n})]})}),(!y||it)&&(0,e.jsx)("ol",{id:lt,children:m.Children.map(Y,(rt,W)=>(0,e.jsx)("li",{children:rt},W))})]})}},61499:(nt,U,t)=>{"use strict";t.d(U,{Z:()=>g});var e=t(85893),m=t(67294),l=t(16607),T=t(96987);const g=({children:h,spacing:M=2,horizontal:O=!1,...R})=>(0,e.jsx)(l.x,{paddingTop:2,paddingBottom:4,children:(0,e.jsx)(T.k,{as:"ol",gap:M,direction:O?"row":"column",alignItems:O?"center":"stretch",...R,children:m.Children.map(h,(I,z)=>(0,e.jsx)("li",{children:I},z))})})}}]);
