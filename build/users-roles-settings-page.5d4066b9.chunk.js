(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[8853],{26302:(u,v,t)=>{"use strict";t.r(v),t.d(v,{default:()=>bt});var e=t(67294),n=t(32638),a=t(16550),r=t(84419),i=t(40720),g=t(90731),p=t(12473),x=t(34726),f=t(96987),h=t(71068),b=t(31988),P=t(6498),F=t(38670),j=t(457),I=t(18226),Z=t(41054),L=t(86896),k=t(88767),N=t(45697),M=t.n(N);const Q=(0,e.createContext)({}),ne=({children:s,value:o})=>e.createElement(Q.Provider,{value:o},s),q=()=>(0,e.useContext)(Q);ne.propTypes={children:M().node.isRequired,value:M().object.isRequired};var W=t(58655),Ce=t(63122),Pe=t(1744),xe=t(68889),Re=t(11700),be=t.n(Re);function Ae(s){switch(s){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return be()(s.replace("api::","").replace("plugin::",""))}}const Me=Ae,Te=(s,o)=>{const l=Object.keys(o).sort().map(c=>({name:c,isOpen:!1}));return{...s,collapses:l}};var U=t(16607),Le=t(89734),se=t.n(Le),ae=t(22546),re=t(22304),Se=t(40989),De=t(27361),X=t.n(De),z=t(71997);const oe=(0,z.iv)`
  background: ${s=>s.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Ze=(0,z.ZP)(U.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${s=>s.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${s=>s.isActive&&oe}
  &:hover {
    ${oe}
  }
`,Oe=z.ZP.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:s})=>s.colors.neutral150};
`,ie=({subCategory:s})=>{const{formatMessage:o}=(0,L.Z)(),{onChange:l,onChangeSelectAll:c,onSelectedAction:E,selectedAction:d,modifiedData:y}=q(),R=(0,e.useMemo)(()=>X()(y,s.name,{}),[y,s]),C=(0,e.useMemo)(()=>Object.values(R).every(m=>m.enabled===!0),[R]),A=(0,e.useMemo)(()=>Object.values(R).some(m=>m.enabled===!0)&&!C,[R,C]),T=(0,e.useCallback)(({target:{name:m}})=>{c({target:{name:m,value:!C}})},[C,c]),S=(0,e.useCallback)(m=>d===m,[d]);return e.createElement(U.x,null,e.createElement(f.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(U.x,{paddingRight:4},e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},s.label)),e.createElement(Oe,null),e.createElement(U.x,{paddingLeft:4},e.createElement(ae.X,{name:s.name,value:C,onValueChange:m=>T({target:{name:s.name,value:m}}),indeterminate:A},o({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(f.k,{paddingTop:6,paddingBottom:6},e.createElement(b.r,{gap:2,style:{flex:1}},s.actions.map(m=>{const D=`${m.name}.enabled`;return e.createElement(P.P,{col:6,key:m.name},e.createElement(Ze,{isActive:S(m.name),padding:2,hasRadius:!0},e.createElement(ae.X,{value:X()(y,D,!1),name:D,onValueChange:B=>l({target:{name:D,value:B}})},m.label),e.createElement("button",{type:"button",onClick:()=>E(m.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(re.T,{as:"span"},o({id:"app.utils.show-bound-route",defaultMessage:"Show bound route for {route}"},{route:m.name})),e.createElement(Se.Z,null))))}))))};ie.propTypes={subCategory:M().object.isRequired};const Be=ie,le=({name:s,permissions:o})=>{const l=(0,e.useMemo)(()=>se()(Object.values(o.controllers).reduce((c,E,d)=>{const y=`${s}.controllers.${Object.keys(o.controllers)[d]}`,R=se()(Object.keys(E).reduce((C,A)=>[...C,{...E[A],label:A,name:`${y}.${A}`}],[]),"label");return[...c,{actions:R,label:Object.keys(o.controllers)[d],name:y}]},[]),"label"),[s,o]);return e.createElement(U.x,{padding:6},l.map(c=>e.createElement(Be,{key:c.name,subCategory:c})))};le.propTypes={name:M().string.isRequired,permissions:M().object.isRequired};const Ne=le;var ce=t(18172);const ke={collapses:[]},je=(s,o)=>(0,ce.ZP)(s,l=>{switch(o.type){case"TOGGLE_COLLAPSE":{l.collapses=s.collapses.map((c,E)=>E===o.index?{...c,isOpen:!c.isOpen}:{...c,isOpen:!1});break}default:return l}}),Ie=()=>{const{modifiedData:s}=q(),{formatMessage:o}=(0,L.Z)(),[{collapses:l},c]=(0,e.useReducer)(je,ke,d=>Te(d,s)),E=d=>c({type:"TOGGLE_COLLAPSE",index:d});return e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:1},l.map((d,y)=>e.createElement(Ce.U,{expanded:d.isOpen,onToggle:()=>E(y),key:d.name,variant:y%2===0?"secondary":void 0},e.createElement(Pe.B,{title:Me(d.name),description:o({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:d.name}),variant:y%2?"primary":"secondary"}),e.createElement(xe.v,null,e.createElement(Ne,{permissions:s[d.name],name:d.name})))))};var $e=t(41609),Fe=t.n($e),Ue=t(82569),we=t.n(Ue),Ge=t(35161),We=t.n(Ge),He=t(13217),Ve=t.n(He);const Qe=s=>{switch(s){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},ze=(0,z.ZP)(U.x)`
  margin: -1px;
  border-radius: ${({theme:s})=>s.spaces[1]} 0 0 ${({theme:s})=>s.spaces[1]};
`;function _({route:s}){const{formatMessage:o}=(0,L.Z)(),{method:l,handler:c,path:E}=s,d=E?Ve()(E.split("/")):[],[y="",R=""]=c?c.split("."):[],C=Qe(s.method);return e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(h.Z,{variant:"delta",as:"h3"},o({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,y),e.createElement(h.Z,{variant:"delta",textColor:"primary600"},".",R)),e.createElement(f.k,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0},e.createElement(ze,{background:C.background,borderColor:C.border,padding:2},e.createElement(h.Z,{fontWeight:"bold",textColor:C.text},l)),e.createElement(U.x,{paddingLeft:2,paddingRight:2},We()(d,A=>e.createElement(h.Z,{key:A,textColor:A.includes(":")?"neutral600":"neutral900"},"/",A)))))}_.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},_.propTypes={route:M().shape({handler:M().string,method:M().string,path:M().string})};const Ke=_,Xe=()=>{const{formatMessage:s}=(0,L.Z)(),{selectedAction:o,routes:l}=q(),c=we()(o.split("."),"controllers"),E=X()(l,c[0]),d=c.slice(1).join("."),y=Fe()(E)?[]:E.filter(R=>R.handler.endsWith(d));return e.createElement(P.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},o?e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},y.map((R,C)=>e.createElement(Ke,{key:C,route:R}))):e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(h.Z,{variant:"delta",as:"h3"},s({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(h.Z,{as:"p",textColor:"neutral600"},s({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))},Ye=(s,o,l)=>({...s,initialData:o,modifiedData:o,routes:l});var Je=t(36968),de=t.n(Je),qe=t(69572),_e=t.n(qe);const et={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},tt=(s,o)=>(0,ce.ZP)(s,l=>{switch(o.type){case"ON_CHANGE":{const c=o.keys.length,E=o.keys[c-1]==="enabled";if(o.value&&E){const d=_e()(o.keys,c-1).join(".");l.selectedAction=d}de()(l,["modifiedData",...o.keys],o.value);break}case"ON_CHANGE_SELECT_ALL":{const c=["modifiedData",...o.keys],E=X()(s,c,{}),d=Object.keys(E).reduce((y,R)=>(y[R]={...E[R],enabled:o.value},y),{});de()(l,c,d);break}case"ON_RESET":{l.modifiedData=s.initialData;break}case"ON_SUBMIT_SUCCEEDED":{l.initialData=s.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:c}=o;l.selectedAction=c===s.selectedAction?"":c;break}default:return l}}),ue=(0,e.forwardRef)(({permissions:s,routes:o},l)=>{const{formatMessage:c}=(0,L.Z)(),[E,d]=(0,e.useReducer)(tt,et,T=>Ye(T,s,o));(0,e.useImperativeHandle)(l,()=>({getPermissions(){return{permissions:E.modifiedData}},resetForm(){d({type:"ON_RESET"})},setFormAfterSubmit(){d({type:"ON_SUBMIT_SUCCEEDED"})}}));const A={...E,onChange:({target:{name:T,value:S}})=>d({type:"ON_CHANGE",keys:T.split("."),value:S==="empty__string_value"?"":S}),onChangeSelectAll:({target:{name:T,value:S}})=>d({type:"ON_CHANGE_SELECT_ALL",keys:T.split("."),value:S}),onSelectedAction:T=>d({type:"SELECT_ACTION",actionToSelect:T})};return e.createElement(ne,{value:A},e.createElement(b.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(P.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(h.Z,{variant:"delta",as:"h2"},c({id:(0,W.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(h.Z,{as:"p",textColor:"neutral600"},c({id:(0,W.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(Ie,null))),e.createElement(Xe,null)))});ue.propTypes={permissions:M().object.isRequired,routes:M().object.isRequired};const me=(0,e.memo)(ue);var ee=t(87561);const ge=ee.Ry().shape({name:ee.Z_().required(n.translatedErrors.required),description:ee.Z_().required(n.translatedErrors.required)});var K=t(99688);const pe=()=>{const s=(0,n.useNotification)(),{get:o}=(0,n.useFetchClient)(),{formatAPIError:l}=(0,n.useAPIErrorHandler)(K.OB),[{data:c,isLoading:E,error:d,refetch:y},{data:R,isLoading:C,error:A,refetch:T}]=(0,k.useQueries)([{queryKey:["users-permissions","permissions"],async queryFn(){const{data:{permissions:D}}=await o("/users-permissions/permissions");return D}},{queryKey:["users-permissions","routes"],async queryFn(){const{data:{routes:D}}=await o("/users-permissions/routes");return D}}]),S=async()=>{await Promise.all([y(),T()])};(0,e.useEffect)(()=>{d&&s({type:"warning",message:l(d)})},[s,d,l]),(0,e.useEffect)(()=>{A&&s({type:"warning",message:l(A)})},[s,A,l]);const m=E||C;return{permissions:c?(0,K.YX)(c):{},routes:R??{},getData:S,isLoading:m}},nt=()=>{const{formatMessage:s}=(0,L.Z)(),o=(0,n.useNotification)(),{goBack:l}=(0,a.k6)(),{lockApp:c,unlockApp:E}=(0,n.useOverlayBlocker)(),{isLoading:d,permissions:y,routes:R}=pe(),{trackUsage:C}=(0,n.useTracking)(),A=e.useRef(),{post:T}=(0,n.useFetchClient)(),S=(0,k.useMutation)(D=>T("/users-permissions/roles",D),{onError(){o({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})},onSuccess(){C("didCreateRole"),o({type:"success",message:{id:(0,W.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),l()}}),m=async D=>{c();const B=A.current.getPermissions();await S.mutate({...D,...B,users:[]}),E()};return e.createElement(i.o,null,e.createElement(n.SettingsPageTitle,{name:"Roles"}),e.createElement(Z.J9,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:m,validationSchema:ge},({handleSubmit:D,values:B,handleChange:H,errors:O})=>e.createElement(n.Form,{noValidate:!0,onSubmit:D},e.createElement(g.T,{primaryAction:!d&&e.createElement(p.z,{type:"submit",loading:S.isLoading,startIcon:e.createElement(I.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:s({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:s({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(x.D,null,e.createElement(f.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(f.k,{direction:"column",alignItems:"stretch"},e.createElement(h.Z,{variant:"delta",as:"h2"},s({id:(0,W.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(b.r,{gap:4},e.createElement(P.P,{col:6},e.createElement(F.o,{name:"name",value:B.name||"",onChange:H,label:s({id:"global.name",defaultMessage:"Name"}),error:O?.name?s({id:O.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(P.P,{col:6},e.createElement(j.g,{id:"description",value:B.description||"",onChange:H,label:s({id:"global.description",defaultMessage:"Description"}),error:O?.description?s({id:O.description,defaultMessage:"Description is required"}):!1,required:!0})))),!d&&e.createElement(me,{ref:A,permissions:y,routes:R}))))))},st=()=>e.createElement(n.CheckPagePermissions,{permissions:r._.createRole},e.createElement(nt,null));var at=t(97695);const rt=()=>{const{formatMessage:s}=(0,L.Z)(),o=(0,n.useNotification)(),{lockApp:l,unlockApp:c}=(0,n.useOverlayBlocker)(),{params:{id:E}}=(0,a.$B)("/settings/users-permissions/roles/:id"),{get:d}=(0,n.useFetchClient)(),{isLoading:y,routes:R}=pe(),{data:C,isLoading:A,refetch:T}=(0,k.useQuery)(["users-permissions","role",E],async()=>{const{data:{role:O}}=await d(`/users-permissions/roles/${E}`);return O}),S=e.useRef(),{put:m}=(0,n.useFetchClient)(),{formatAPIError:D}=(0,n.useAPIErrorHandler)(),B=(0,k.useMutation)(O=>m(`/users-permissions/roles/${E}`,O),{onError(O){o({type:"warning",message:D(O)})},async onSuccess(){o({type:"success",message:{id:(0,W.Z)("Settings.roles.created"),defaultMessage:"Role edited"}}),await T()}}),H=async O=>{l();const w=S.current.getPermissions();await B.mutate({...O,...w,users:[]}),c()};return A?e.createElement(n.LoadingIndicatorPage,null):e.createElement(i.o,null,e.createElement(n.SettingsPageTitle,{name:"Roles"}),e.createElement(Z.J9,{enableReinitialize:!0,initialValues:{name:C.name,description:C.description},onSubmit:H,validationSchema:ge},({handleSubmit:O,values:w,handleChange:Y,errors:V})=>e.createElement(n.Form,{noValidate:!0,onSubmit:O},e.createElement(g.T,{primaryAction:!y&&e.createElement(p.z,{disabled:C.code==="strapi-super-admin",type:"submit",loading:B.isLoading,startIcon:e.createElement(I.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:C.name,subtitle:C.description,navigationAction:e.createElement(n.Link,{startIcon:e.createElement(at.Z,null),to:"/settings/users-permissions/roles"},s({id:"global.back",defaultMessage:"Back"}))}),e.createElement(x.D,null,e.createElement(f.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(f.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(h.Z,{variant:"delta",as:"h2"},s({id:(0,W.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(b.r,{gap:4},e.createElement(P.P,{col:6},e.createElement(F.o,{name:"name",value:w.name||"",onChange:Y,label:s({id:"global.name",defaultMessage:"Name"}),error:V?.name?s({id:V.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(P.P,{col:6},e.createElement(j.g,{id:"description",value:w.description||"",onChange:Y,label:s({id:"global.description",defaultMessage:"Description"}),error:V?.description?s({id:V.description,defaultMessage:"Description is required"}):!1,required:!0})))),!y&&e.createElement(me,{ref:S,permissions:C.permissions,routes:R}))))))},ot=()=>e.createElement(n.CheckPagePermissions,{permissions:r._.updateRole},e.createElement(rt,null));var it=t(334),lt=t(71590),ct=t(55040),dt=t(5923),ut=t(3547),he=t(29299),$=t(69398),mt=t(83598),gt=t(29824),pt=t(35752),ht=t(96208),ft=t(2382),Et=t(54425);const vt=(0,z.ZP)(gt.r)`
  align-items: center;
  height: ${(0,n.pxToRem)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:s})=>`${s.spaces[2]}}`};
  width: ${(0,n.pxToRem)(32)};

  svg {
    height: ${(0,n.pxToRem)(12)};
    width: ${(0,n.pxToRem)(12)};

    path {
      fill: ${({theme:s})=>s.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:s})=>s.colors.neutral800};
      }
    }
  }
`,te=({sortedRoles:s,canDelete:o,permissions:l,setRoleToDelete:c,onDelete:E})=>{const{formatMessage:d}=(0,L.Z)(),{push:y}=(0,a.k6)(),[R,C]=E,A=m=>o&&!["public","authenticated"].includes(m.type),T=m=>{c(m),C(!R)},S=m=>{y(`/settings/users-permissions/roles/${m}`)};return e.createElement(pt.p,null,s?.map(m=>e.createElement(he.Tr,{key:m.name,...(0,n.onRowClick)({fn:()=>S(m.id)})},e.createElement($.Td,{width:"20%"},e.createElement(h.Z,null,m.name)),e.createElement($.Td,{width:"50%"},e.createElement(h.Z,null,m.description)),e.createElement($.Td,{width:"30%"},e.createElement(h.Z,null,d({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {# user} one {# user} other {# users}}"},{number:m.nb_users}))),e.createElement($.Td,null,e.createElement(f.k,{justifyContent:"end",...n.stopPropagation},e.createElement(n.CheckPermissions,{permissions:l.updateRole},e.createElement(vt,{to:`/settings/users-permissions/roles/${m.id}`,"aria-label":d({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${m.name}`})},e.createElement(ft.Z,null))),A(m)&&e.createElement(n.CheckPermissions,{permissions:l.deleteRole},e.createElement(ht.h,{onClick:()=>T(m.id),noBorder:!0,icon:e.createElement(Et.Z,null),label:d({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${m.name}`})})))))))},yt=te;te.defaultProps={canDelete:!1},te.propTypes={onDelete:M().array.isRequired,permissions:M().object.isRequired,setRoleToDelete:M().func.isRequired,sortedRoles:M().array.isRequired,canDelete:M().bool};const Ct=async(s,o)=>{try{const{get:l}=(0,n.getFetchClient)(),{data:c}=await l("/users-permissions/roles");return o("The roles have loaded successfully"),c}catch(l){throw s({type:"warning",message:{id:"notification.error"}}),new Error(l)}},Pt=async(s,o)=>{try{const{del:l}=(0,n.getFetchClient)();await l(`/users-permissions/roles/${s}`)}catch{o({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},xt=()=>{const{trackUsage:s}=(0,n.useTracking)(),{formatMessage:o,locale:l}=(0,L.Z)(),c=(0,n.useNotification)(),{notifyStatus:E}=(0,it.G)(),[{query:d}]=(0,n.useQueryParams)(),y=d?._q||"",[R,C]=(0,e.useState)(!1),[A,T]=(0,e.useState)(!1),[S,m]=(0,e.useState)();(0,n.useFocusWhenNavigate)();const{isLoading:D,allowedActions:{canRead:B,canDelete:H}}=(0,n.useRBAC)({create:r._.createRole,read:r._.readRoles,update:r._.updateRole,delete:r._.deleteRole}),{isLoading:O,data:{roles:w},isFetching:Y,refetch:V}=(0,k.useQuery)("get-roles",()=>Ct(c,E),{initialData:{},enabled:B}),{includes:fe}=(0,n.useFilter)(l,{sensitivity:"base"}),Ee=(0,n.useCollator)(l,{sensitivity:"base"}),ve=O||Y,At=()=>{C(!R)},Mt={roles:{id:(0,K.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,K.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Tt=o({id:"global.roles",defaultMessage:"Roles"}),Lt=(0,k.useMutation)(G=>Pt(G,c),{async onSuccess(){await V()}}),St=async()=>{T(!0),await Lt.mutateAsync(S),C(!R),T(!1)},J=(w||[]).filter(G=>fe(G.name,y)||fe(G.description,y)).sort((G,ye)=>Ee.compare(G.name,ye.name)||Ee.compare(G.description,ye.description)),Dt=y&&!J.length?"search":"roles",Zt=4,Ot=(w?.length||0)+1;return e.createElement(lt.A,null,e.createElement(n.SettingsPageTitle,{name:Tt}),e.createElement(i.o,{"aria-busy":ve},e.createElement(g.T,{title:o({id:"global.roles",defaultMessage:"Roles"}),subtitle:o({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(n.CheckPermissions,{permissions:r._.createRole},e.createElement(n.LinkButton,{to:"/settings/users-permissions/roles/new",onClick:()=>s("willCreateRole"),startIcon:e.createElement(mt.Z,null),size:"S"},o({id:(0,K.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(ct.Z,{startActions:e.createElement(n.SearchURLQuery,{label:o({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(x.D,null,!B&&e.createElement(n.NoPermissions,null),(ve||D)&&e.createElement(n.LoadingIndicatorPage,null),B&&J&&J?.length?e.createElement(dt.i,{colCount:Zt,rowCount:Ot},e.createElement(ut.h,null,e.createElement(he.Tr,null,e.createElement($.Th,null,e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},o({id:"global.name",defaultMessage:"Name"}))),e.createElement($.Th,null,e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},o({id:"global.description",defaultMessage:"Description"}))),e.createElement($.Th,null,e.createElement(h.Z,{variant:"sigma",textColor:"neutral600"},o({id:"global.users",defaultMessage:"Users"}))),e.createElement($.Th,null,e.createElement(re.T,null,o({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(yt,{sortedRoles:J,canDelete:H,permissions:r._,setRoleToDelete:m,onDelete:[R,C]})):e.createElement(n.EmptyStateLayout,{content:Mt[Dt]})),e.createElement(n.ConfirmDialog,{isConfirmButtonLoading:A,onConfirm:St,onToggleDialog:At,isOpen:R})))},Rt=()=>e.createElement(n.CheckPagePermissions,{permissions:r._.accessRoles},e.createElement(xt,null)),bt=()=>e.createElement(n.CheckPagePermissions,{permissions:r._.accessRoles},e.createElement(a.rs,null,e.createElement(a.AW,{path:"/settings/users-permissions/roles/new",component:st,exact:!0}),e.createElement(a.AW,{path:"/settings/users-permissions/roles/:id",component:ot,exact:!0}),e.createElement(a.AW,{path:"/settings/users-permissions/roles",component:Rt,exact:!0}),e.createElement(a.AW,{path:"",component:n.AnErrorOccurred})))},99688:(u,v,t)=>{"use strict";t.d(v,{YX:()=>r,OB:()=>i.Z});var e=t(41609),n=t.n(e);const r=g=>Object.keys(g).reduce((p,x)=>{const f=g[x].controllers,h=Object.keys(f).reduce((b,P)=>(n()(f[P])||(b[P]=f[P]),b),{});return n()(h)||(p[x]={controllers:h}),p},{});var i=t(58655)},47443:(u,v,t)=>{var e=t(42118);function n(a,r){var i=a==null?0:a.length;return!!i&&e(a,r,0)>-1}u.exports=n},1196:u=>{function v(t,e,n){for(var a=-1,r=t==null?0:t.length;++a<r;)if(n(e,t[a]))return!0;return!1}u.exports=v},20731:(u,v,t)=>{var e=t(88668),n=t(47443),a=t(1196),r=t(29932),i=t(7518),g=t(74757),p=200;function x(f,h,b,P){var F=-1,j=n,I=!0,Z=f.length,L=[],k=h.length;if(!Z)return L;b&&(h=r(h,i(b))),P?(j=a,I=!1):h.length>=p&&(j=g,I=!1,h=new e(h));e:for(;++F<Z;){var N=f[F],M=b==null?N:b(N);if(N=P||N!==0?N:0,I&&M===M){for(var Q=k;Q--;)if(h[Q]===M)continue e;L.push(N)}else j(h,M,P)||L.push(N)}return L}u.exports=x},89881:(u,v,t)=>{var e=t(47816),n=t(99291),a=n(e);u.exports=a},41848:u=>{function v(t,e,n,a){for(var r=t.length,i=n+(a?1:-1);a?i--:++i<r;)if(e(t[i],i,t))return i;return-1}u.exports=v},42118:(u,v,t)=>{var e=t(41848),n=t(62722),a=t(42351);function r(i,g,p){return g===g?a(i,g,p):e(i,n,p)}u.exports=r},62722:u=>{function v(t){return t!==t}u.exports=v},69199:(u,v,t)=>{var e=t(89881),n=t(98612);function a(r,i){var g=-1,p=n(r)?Array(r.length):[];return e(r,function(x,f,h){p[++g]=i(x,f,h)}),p}u.exports=a},82689:(u,v,t)=>{var e=t(29932),n=t(97786),a=t(67206),r=t(69199),i=t(71131),g=t(7518),p=t(85022),x=t(6557),f=t(1469);function h(b,P,F){P.length?P=e(P,function(Z){return f(Z)?function(L){return n(L,Z.length===1?Z[0]:Z)}:Z}):P=[x];var j=-1;P=e(P,g(a));var I=r(b,function(Z,L,k){var N=e(P,function(M){return M(Z)});return{criteria:N,index:++j,value:Z}});return i(I,function(Z,L){return p(Z,L,F)})}u.exports=h},71131:u=>{function v(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}u.exports=v},26393:(u,v,t)=>{var e=t(33448);function n(a,r){if(a!==r){var i=a!==void 0,g=a===null,p=a===a,x=e(a),f=r!==void 0,h=r===null,b=r===r,P=e(r);if(!h&&!P&&!x&&a>r||x&&f&&b&&!h&&!P||g&&f&&b||!i&&b||!p)return 1;if(!g&&!x&&!P&&a<r||P&&i&&p&&!g&&!x||h&&i&&p||!f&&p||!b)return-1}return 0}u.exports=n},85022:(u,v,t)=>{var e=t(26393);function n(a,r,i){for(var g=-1,p=a.criteria,x=r.criteria,f=p.length,h=i.length;++g<f;){var b=e(p[g],x[g]);if(b){if(g>=h)return b;var P=i[g];return b*(P=="desc"?-1:1)}}return a.index-r.index}u.exports=n},99291:(u,v,t)=>{var e=t(98612);function n(a,r){return function(i,g){if(i==null)return i;if(!e(i))return a(i,g);for(var p=i.length,x=r?p:-1,f=Object(i);(r?x--:++x<p)&&g(f[x],x,f)!==!1;);return i}}u.exports=n},42351:u=>{function v(t,e,n){for(var a=n-1,r=t.length;++a<r;)if(t[a]===e)return a;return-1}u.exports=v},35161:(u,v,t)=>{var e=t(29932),n=t(67206),a=t(69199),r=t(1469);function i(g,p){var x=r(g)?e:a;return x(g,n(p,3))}u.exports=i},89734:(u,v,t)=>{var e=t(21078),n=t(82689),a=t(5976),r=t(16612),i=a(function(g,p){if(g==null)return[];var x=p.length;return x>1&&r(g,p[0],p[1])?p=[]:x>2&&r(p[0],p[1],p[2])&&(p=[p[0]]),n(g,e(p,1),[])});u.exports=i},13217:(u,v,t)=>{var e=t(14259);function n(a){var r=a==null?0:a.length;return r?e(a,1,r):[]}u.exports=n},69572:(u,v,t)=>{var e=t(14259),n=t(40554);function a(r,i,g){return r&&r.length?(i=g||i===void 0?1:n(i),e(r,0,i<0?0:i)):[]}u.exports=a},82569:(u,v,t)=>{var e=t(20731),n=t(5976),a=t(29246),r=n(function(i,g){return a(i)?e(i,g):[]});u.exports=r},97695:(u,v,t)=>{"use strict";t.d(v,{Z:()=>a});var e=t(85893);const n=r=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...r,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),a=n},40989:(u,v,t)=>{"use strict";t.d(v,{Z:()=>a});var e=t(85893);const n=r=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...r,children:(0,e.jsx)("path",{fill:"#212134",fillRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 0 0-.374.68v1.65a.797.797 0 0 0 .384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 0 0 .216.744l1.167 1.166a.801.801 0 0 0 .744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 0 0 .679.374h1.649a.797.797 0 0 0 .686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 0 0 .744-.216l1.166-1.167a.803.803 0 0 0 .216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 0 0 .374-.679v-1.649a.796.796 0 0 0-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 0 0-.216-.744l-1.166-1.173a.802.802 0 0 0-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 0 0-.68-.374h-1.65a.797.797 0 0 0-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 0 0-.744.216L2.921 4.094a.802.802 0 0 0-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8ZM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z",clipRule:"evenodd"})}),a=n}}]);
