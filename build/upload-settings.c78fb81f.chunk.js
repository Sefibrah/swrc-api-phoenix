"use strict";(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[695],{56752:($,f,e)=>{e.r(f),e.d(f,{SettingsPage:()=>h,default:()=>Z});var t=e(67294),O=e(40720),y=e(90731),b=e(12473),D=e(34726),C=e(71590),d=e(96987),M=e(16607),z=e(71068),P=e(31988),g=e(6498),c=e(17705),o=e(32638),S=e(18226),L=e(18446),B=e.n(L),T=e(64593),A=e(86896),p=e(88767),I=e(11727),s=e(63955);const x=a=>a;var N=e(18172),F=e(36968),G=e.n(F);const k={initialData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1},modifiedData:{responsiveDimensions:!0,sizeOptimization:!0,autoOrientation:!1,videoPreview:!1}},H=(a,i)=>(0,N.ZP)(a,l=>{switch(i.type){case"GET_DATA_SUCCEEDED":{l.initialData=i.data,l.modifiedData=i.data;break}case"ON_CHANGE":{G()(l,["modifiedData",...i.keys.split(".")],i.value);break}default:return a}}),h=()=>{const{formatMessage:a}=(0,A.Z)(),{lockApp:i,unlockApp:l}=(0,o.useOverlayBlocker)(),R=(0,o.useNotification)(),{get:U,put:K}=(0,o.useFetchClient)();(0,o.useFocusWhenNavigate)();const[{initialData:Q,modifiedData:r},v]=(0,t.useReducer)(H,k,x),{data:m,isLoading:W,refetch:X}=(0,p.useQuery)({queryKey:["upload","settings"],async queryFn(){const{data:{data:n}}=await U("/upload/settings");return n}});t.useEffect(()=>{m&&v({type:"GET_DATA_SUCCEEDED",data:m})},[m]);const E=B()(Q,r),{mutateAsync:j,isLoading:J}=(0,p.useMutation)({async mutationFn(n){return K("/upload/settings",n)},onSuccess(){X(),R({type:"success",message:{id:"notification.form.success.fields"}})},onError(n){console.error(n)}}),V=async n=>{n.preventDefault(),!E&&(i(),await j(r),l())},u=({target:{name:n,value:Y}})=>{v({type:"ON_CHANGE",keys:n,value:Y})};return t.createElement(O.o,{tabIndex:-1},t.createElement(T.q,{title:a({id:(0,s.OB)("page.title"),defaultMessage:"Settings - Media Libray"})}),t.createElement("form",{onSubmit:V},t.createElement(y.T,{title:a({id:(0,s.OB)("settings.header.label"),defaultMessage:"Media Library"}),primaryAction:t.createElement(b.z,{disabled:E,loading:J,type:"submit",startIcon:t.createElement(S.Z,null),size:"S"},a({id:"global.save",defaultMessage:"Save"})),subtitle:a({id:(0,s.OB)("settings.sub-header.label"),defaultMessage:"Configure the settings for the Media Library"})}),t.createElement(D.D,null,W?t.createElement(o.LoadingIndicatorPage,null):t.createElement(C.A,null,t.createElement(d.k,{direction:"column",alignItems:"stretch",gap:12},t.createElement(M.x,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},t.createElement(d.k,{direction:"column",alignItems:"stretch",gap:4},t.createElement(d.k,null,t.createElement(z.Z,{variant:"delta",as:"h2"},a({id:(0,s.OB)("settings.blockTitle"),defaultMessage:"Asset management"}))),t.createElement(P.r,{gap:6},t.createElement(g.P,{col:6,s:12},t.createElement(c.s,{"aria-label":"responsiveDimensions",checked:r.responsiveDimensions,hint:a({id:(0,s.OB)("settings.form.responsiveDimensions.description"),defaultMessage:"Enabling this option will generate multiple formats (small, medium and large) of the uploaded asset."}),label:a({id:(0,s.OB)("settings.form.responsiveDimensions.label"),defaultMessage:"Responsive friendly upload"}),name:"responsiveDimensions",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:n=>{u({target:{name:"responsiveDimensions",value:n.target.checked}})}})),t.createElement(g.P,{col:6,s:12},t.createElement(c.s,{"aria-label":"sizeOptimization",checked:r.sizeOptimization,hint:a({id:(0,s.OB)("settings.form.sizeOptimization.description"),defaultMessage:"Enabling this option will reduce the image size and slightly reduce its quality."}),label:a({id:(0,s.OB)("settings.form.sizeOptimization.label"),defaultMessage:"Size optimization"}),name:"sizeOptimization",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:n=>{u({target:{name:"sizeOptimization",value:n.target.checked}})}})),t.createElement(g.P,{col:6,s:12},t.createElement(c.s,{"aria-label":"autoOrientation",checked:r.autoOrientation,hint:a({id:(0,s.OB)("settings.form.autoOrientation.description"),defaultMessage:"Enabling this option will automatically rotate the image according to EXIF orientation tag."}),label:a({id:(0,s.OB)("settings.form.autoOrientation.label"),defaultMessage:"Auto orientation"}),name:"autoOrientation",offLabel:a({id:"app.components.ToggleCheckbox.off-label",defaultMessage:"Off"}),onLabel:a({id:"app.components.ToggleCheckbox.on-label",defaultMessage:"On"}),onChange:n=>{u({target:{name:"autoOrientation",value:n.target.checked}})}}))))))))))},Z=()=>t.createElement(o.CheckPagePermissions,{permissions:I._I.settings},t.createElement(h,null))}}]);
