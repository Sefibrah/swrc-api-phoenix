(self.webpackChunkstrapi=self.webpackChunkstrapi||[]).push([[8853],{56611:(c,u,t)=>{"use strict";t.r(u),t.d(u,{default:()=>bt});var e=t(53547),n=t(56127),a=t(55168),r=t(99771),o=t(57713),d=t(79371),i=t(19442),x=t(26789),h=t(75878),p=t(78549),T=t(9370),R=t(61585),m=t(28469),g=t(20603),M=t(8675),C=t(94649),v=t(86896),O=t(88767),S=t(45697),A=t.n(S);const N=(0,e.createContext)({}),$=({children:s,value:l})=>e.createElement(N.Provider,{value:l},s),K=()=>(0,e.useContext)(N);$.propTypes={children:A().node.isRequired,value:A().object.isRequired};var U=t(74871),J=t(63128),G=t(27375),le=t(37362),se=t(11700),de=t.n(se);function V(s){switch(s){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return de()(s.replace("api::","").replace("plugin::",""))}}const ae=V,ce=(s,l)=>{const f=Object.keys(l).sort().map(E=>({name:E,isOpen:!1}));return{...s,collapses:f}};var F=t(50781),ue=t(89734),q=t.n(ue),_=t(13539),ee=t(22996),De=t(80606),Oe=t(27361),re=t.n(Oe),te=t(88972);const fe=(0,te.iv)`
  background: ${s=>s.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,Be=(0,te.ZP)(F.x)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${s=>s.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${s=>s.isActive&&fe}
  &:hover {
    ${fe}
  }
`,Se=te.ZP.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:s})=>s.colors.neutral150};
`,Ee=({subCategory:s})=>{const{formatMessage:l}=(0,v.Z)(),{onChange:f,onChangeSelectAll:E,onSelectedAction:b,selectedAction:y,modifiedData:L}=K(),D=(0,e.useMemo)(()=>re()(L,s.name,{}),[L,s]),j=(0,e.useMemo)(()=>Object.values(D).every(P=>P.enabled===!0),[D]),B=(0,e.useMemo)(()=>Object.values(D).some(P=>P.enabled===!0)&&!j,[D,j]),Z=(0,e.useCallback)(({target:{name:P}})=>{E({target:{name:P,value:!j}})},[j,E]),I=(0,e.useCallback)(P=>y===P,[y]);return e.createElement(F.x,null,e.createElement(h.k,{justifyContent:"space-between",alignItems:"center"},e.createElement(F.x,{paddingRight:4},e.createElement(p.Z,{variant:"sigma",textColor:"neutral600"},s.label)),e.createElement(Se,null),e.createElement(F.x,{paddingLeft:4},e.createElement(_.X,{name:s.name,value:j,onValueChange:P=>Z({target:{name:s.name,value:P}}),indeterminate:B},l({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(h.k,{paddingTop:6,paddingBottom:6},e.createElement(T.r,{gap:2,style:{flex:1}},s.actions.map(P=>{const W=`${P.name}.enabled`;return e.createElement(R.P,{col:6,key:P.name},e.createElement(Be,{isActive:I(P.name),padding:2,hasRadius:!0},e.createElement(_.X,{value:re()(L,W,!1),name:W,onValueChange:w=>f({target:{name:W,value:w}})},P.label),e.createElement("button",{type:"button",onClick:()=>b(P.name),style:{display:"inline-flex",alignItems:"center"}},e.createElement(ee.T,{as:"span"},l({id:"app.utils.show-bound-route",defaultMessage:"Show bound route for {route}"},{route:P.name})),e.createElement(De.Z,null))))}))))};Ee.propTypes={subCategory:A().object.isRequired};const Ze=Ee,xe=({name:s,permissions:l})=>{const f=(0,e.useMemo)(()=>q()(Object.values(l.controllers).reduce((E,b,y)=>{const L=`${s}.controllers.${Object.keys(l.controllers)[y]}`,D=q()(Object.keys(b).reduce((j,B)=>[...j,{...b[B],label:B,name:`${L}.${B}`}],[]),"label");return[...E,{actions:D,label:Object.keys(l.controllers)[y],name:L}]},[]),"label"),[s,l]);return e.createElement(F.x,{padding:6},f.map(E=>e.createElement(Ze,{key:E.name,subCategory:E})))};xe.propTypes={name:A().string.isRequired,permissions:A().object.isRequired};const $e=xe;var ve=t(18172);const Ie={collapses:[]},Ue=(s,l)=>(0,ve.ZP)(s,f=>{switch(l.type){case"TOGGLE_COLLAPSE":{f.collapses=s.collapses.map((E,b)=>b===l.index?{...E,isOpen:!E.isOpen}:{...E,isOpen:!1});break}default:return f}}),We=()=>{const{modifiedData:s}=K(),{formatMessage:l}=(0,v.Z)(),[{collapses:f},E]=(0,e.useReducer)(Ue,Ie,y=>ce(y,s)),b=y=>E({type:"TOGGLE_COLLAPSE",index:y});return e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:1},f.map((y,L)=>e.createElement(J.U,{expanded:y.isOpen,onToggle:()=>b(L),key:y.name,variant:L%2===0?"secondary":void 0},e.createElement(G.B,{title:ae(y.name),description:l({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:y.name}),variant:L%2?"primary":"secondary"}),e.createElement(le.v,null,e.createElement($e,{permissions:s[y.name],name:y.name})))))};var ke=t(41609),Ne=t.n(ke),we=t(82569),Ke=t.n(we),Fe=t(35161),ze=t.n(Fe),Ge=t(13217),He=t.n(Ge);const Qe=s=>{switch(s){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Ve=(0,te.ZP)(F.x)`
  margin: -1px;
  border-radius: ${({theme:s})=>s.spaces[1]} 0 0 ${({theme:s})=>s.spaces[1]};
`;function me({route:s}){const{formatMessage:l}=(0,v.Z)(),{method:f,handler:E,path:b}=s,y=b?He()(b.split("/")):[],[L="",D=""]=E?E.split("."):[],j=Qe(s.method);return e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(p.Z,{variant:"delta",as:"h3"},l({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",e.createElement("span",null,L),e.createElement(p.Z,{variant:"delta",textColor:"primary600"},".",D)),e.createElement(h.k,{hasRadius:!0,background:"neutral0",borderColor:"neutral200",gap:0},e.createElement(Ve,{background:j.background,borderColor:j.border,padding:2},e.createElement(p.Z,{fontWeight:"bold",textColor:j.text},f)),e.createElement(F.x,{paddingLeft:2,paddingRight:2},ze()(y,B=>e.createElement(p.Z,{key:B,textColor:B.includes(":")?"neutral600":"neutral900"},"/",B)))))}me.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},me.propTypes={route:A().shape({handler:A().string,method:A().string,path:A().string})};const Ye=me,Xe=()=>{const{formatMessage:s}=(0,v.Z)(),{selectedAction:l,routes:f}=K(),E=Ke()(l.split("."),"controllers"),b=re()(f,E[0]),y=E.slice(1).join("."),L=Ne()(b)?[]:b.filter(D=>D.handler.endsWith(y));return e.createElement(R.P,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},l?e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:2},L.map((D,j)=>e.createElement(Ye,{key:j,route:D}))):e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(p.Z,{variant:"delta",as:"h3"},s({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),e.createElement(p.Z,{as:"p",textColor:"neutral600"},s({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))},Je=(s,l,f)=>({...s,initialData:l,modifiedData:l,routes:f});var qe=t(36968),ye=t.n(qe),_e=t(69572),et=t.n(_e);const tt={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},nt=(s,l)=>(0,ve.ZP)(s,f=>{switch(l.type){case"ON_CHANGE":{const E=l.keys.length,b=l.keys[E-1]==="enabled";if(l.value&&b){const y=et()(l.keys,E-1).join(".");f.selectedAction=y}ye()(f,["modifiedData",...l.keys],l.value);break}case"ON_CHANGE_SELECT_ALL":{const E=["modifiedData",...l.keys],b=re()(s,E,{}),y=Object.keys(b).reduce((L,D)=>(L[D]={...b[D],enabled:l.value},L),{});ye()(f,E,y);break}case"ON_RESET":{f.modifiedData=s.initialData;break}case"ON_SUBMIT_SUCCEEDED":{f.initialData=s.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:E}=l;f.selectedAction=E===s.selectedAction?"":E;break}default:return f}}),Ce=(0,e.forwardRef)(({permissions:s,routes:l},f)=>{const{formatMessage:E}=(0,v.Z)(),[b,y]=(0,e.useReducer)(nt,tt,Z=>Je(Z,s,l));(0,e.useImperativeHandle)(f,()=>({getPermissions(){return{permissions:b.modifiedData}},resetForm(){y({type:"ON_RESET"})},setFormAfterSubmit(){y({type:"ON_SUBMIT_SUCCEEDED"})}}));const B={...b,onChange:({target:{name:Z,value:I}})=>y({type:"ON_CHANGE",keys:Z.split("."),value:I==="empty__string_value"?"":I}),onChangeSelectAll:({target:{name:Z,value:I}})=>y({type:"ON_CHANGE_SELECT_ALL",keys:Z.split("."),value:I}),onSelectedAction:Z=>y({type:"SELECT_ACTION",actionToSelect:Z})};return e.createElement($,{value:B},e.createElement(T.r,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},e.createElement(R.P,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:6},e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:2},e.createElement(p.Z,{variant:"delta",as:"h2"},E({id:(0,U.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),e.createElement(p.Z,{as:"p",textColor:"neutral600"},E({id:(0,U.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),e.createElement(We,null))),e.createElement(Xe,null)))});Ce.propTypes={permissions:A().object.isRequired,routes:A().object.isRequired};const Pe=(0,e.memo)(Ce);var ge=t(87561);const Me=ge.Ry().shape({name:ge.Z_().required(n.I0.required),description:ge.Z_().required(n.I0.required)});var ne=t(62111);const Re=()=>{const s=(0,n.lm)(),{get:l}=(0,n.kY)(),{formatAPIError:f}=(0,n.So)(ne.OB),[{data:E,isLoading:b,error:y,refetch:L},{data:D,isLoading:j,error:B,refetch:Z}]=(0,O.useQueries)([{queryKey:["users-permissions","permissions"],async queryFn(){const{data:{permissions:W}}=await l("/users-permissions/permissions");return W}},{queryKey:["users-permissions","routes"],async queryFn(){const{data:{routes:W}}=await l("/users-permissions/routes");return W}}]),I=async()=>{await Promise.all([L(),Z()])};(0,e.useEffect)(()=>{y&&s({type:"warning",message:f(y)})},[s,y,f]),(0,e.useEffect)(()=>{B&&s({type:"warning",message:f(B)})},[s,B,f]);const P=b||j;return{permissions:E?(0,ne.YX)(E):{},routes:D??{},getData:I,isLoading:P}},st=()=>{const{formatMessage:s}=(0,v.Z)(),l=(0,n.lm)(),{goBack:f}=(0,a.k6)(),{lockApp:E,unlockApp:b}=(0,n.o1)(),{isLoading:y,permissions:L,routes:D}=Re(),{trackUsage:j}=(0,n.rS)(),B=e.useRef(),{post:Z}=(0,n.kY)(),I=(0,O.useMutation)(W=>Z("/users-permissions/roles",W),{onError(){l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})},onSuccess(){j("didCreateRole"),l({type:"success",message:{id:(0,U.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),f()}}),P=async W=>{E();const w=B.current.getPermissions();await I.mutate({...W,...w,users:[]}),b()};return e.createElement(o.o,null,e.createElement(n.SL,{name:"Roles"}),e.createElement(C.J9,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:P,validationSchema:Me},({handleSubmit:W,values:w,handleChange:Y,errors:k})=>e.createElement(n.l0,{noValidate:!0,onSubmit:W},e.createElement(d.T,{primaryAction:!y&&e.createElement(i.z,{type:"submit",loading:I.isLoading,startIcon:e.createElement(M.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:s({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:s({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),e.createElement(x.D,null,e.createElement(h.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(h.k,{direction:"column",alignItems:"stretch"},e.createElement(p.Z,{variant:"delta",as:"h2"},s({id:(0,U.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(T.r,{gap:4},e.createElement(R.P,{col:6},e.createElement(m.o,{name:"name",value:w.name||"",onChange:Y,label:s({id:"global.name",defaultMessage:"Name"}),error:k?.name?s({id:k.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(R.P,{col:6},e.createElement(g.g,{id:"description",value:w.description||"",onChange:Y,label:s({id:"global.description",defaultMessage:"Description"}),error:k?.description?s({id:k.description,defaultMessage:"Description is required"}):!1,required:!0})))),!y&&e.createElement(Pe,{ref:B,permissions:L,routes:D}))))))},at=()=>e.createElement(n.O4,{permissions:r._.createRole},e.createElement(st,null));var rt=t(60793);const ot=()=>{const{formatMessage:s}=(0,v.Z)(),l=(0,n.lm)(),{lockApp:f,unlockApp:E}=(0,n.o1)(),{params:{id:b}}=(0,a.$B)("/settings/users-permissions/roles/:id"),{get:y}=(0,n.kY)(),{isLoading:L,routes:D}=Re(),{data:j,isLoading:B,refetch:Z}=(0,O.useQuery)(["users-permissions","role",b],async()=>{const{data:{role:k}}=await y(`/users-permissions/roles/${b}`);return k}),I=e.useRef(),{put:P}=(0,n.kY)(),{formatAPIError:W}=(0,n.So)(),w=(0,O.useMutation)(k=>P(`/users-permissions/roles/${b}`,k),{onError(k){l({type:"warning",message:W(k)})},async onSuccess(){l({type:"success",message:{id:(0,U.Z)("Settings.roles.created"),defaultMessage:"Role edited"}}),await Z()}}),Y=async k=>{f();const H=I.current.getPermissions();await w.mutate({...k,...H,users:[]}),E()};return B?e.createElement(n.dO,null):e.createElement(o.o,null,e.createElement(n.SL,{name:"Roles"}),e.createElement(C.J9,{enableReinitialize:!0,initialValues:{name:j.name,description:j.description},onSubmit:Y,validationSchema:Me},({handleSubmit:k,values:H,handleChange:oe,errors:X})=>e.createElement(n.l0,{noValidate:!0,onSubmit:k},e.createElement(d.T,{primaryAction:!L&&e.createElement(i.z,{disabled:j.code==="strapi-super-admin",type:"submit",loading:w.isLoading,startIcon:e.createElement(M.Z,null)},s({id:"global.save",defaultMessage:"Save"})),title:j.name,subtitle:j.description,navigationAction:e.createElement(n.rU,{startIcon:e.createElement(rt.Z,null),to:"/settings/users-permissions/roles"},s({id:"global.back",defaultMessage:"Back"}))}),e.createElement(x.D,null,e.createElement(h.k,{background:"neutral0",direction:"column",alignItems:"stretch",gap:7,hasRadius:!0,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,shadow:"filterShadow"},e.createElement(h.k,{direction:"column",alignItems:"stretch",gap:4},e.createElement(p.Z,{variant:"delta",as:"h2"},s({id:(0,U.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),e.createElement(T.r,{gap:4},e.createElement(R.P,{col:6},e.createElement(m.o,{name:"name",value:H.name||"",onChange:oe,label:s({id:"global.name",defaultMessage:"Name"}),error:X?.name?s({id:X.name,defaultMessage:"Name is required"}):!1,required:!0})),e.createElement(R.P,{col:6},e.createElement(g.g,{id:"description",value:H.description||"",onChange:oe,label:s({id:"global.description",defaultMessage:"Description"}),error:X?.description?s({id:X.description,defaultMessage:"Description is required"}):!1,required:!0})))),!L&&e.createElement(Pe,{ref:I,permissions:j.permissions,routes:D}))))))},it=()=>e.createElement(n.O4,{permissions:r._.updateRole},e.createElement(ot,null));var lt=t(46683),dt=t(45349),ct=t(15483),ut=t(51541),mt=t(42403),be=t(6090),z=t(62351),gt=t(12978),pt=t(51503),ht=t(94487),ft=t(37527),Et=t(36670),xt=t(34263);const vt=(0,te.ZP)(pt.r)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:s})=>`${s.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:s})=>s.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:s})=>s.colors.neutral800};
      }
    }
  }
`,pe=({sortedRoles:s,canDelete:l,permissions:f,setRoleToDelete:E,onDelete:b})=>{const{formatMessage:y}=(0,v.Z)(),{push:L}=(0,a.k6)(),[D,j]=b,B=P=>l&&!["public","authenticated"].includes(P.type),Z=P=>{E(P),j(!D)},I=P=>{L(`/settings/users-permissions/roles/${P}`)};return e.createElement(ht.p,null,s?.map(P=>e.createElement(be.Tr,{key:P.name,...(0,n.X7)({fn:()=>I(P.id)})},e.createElement(z.Td,{width:"20%"},e.createElement(p.Z,null,P.name)),e.createElement(z.Td,{width:"50%"},e.createElement(p.Z,null,P.description)),e.createElement(z.Td,{width:"30%"},e.createElement(p.Z,null,y({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {# user} one {# user} other {# users}}"},{number:P.nb_users}))),e.createElement(z.Td,null,e.createElement(h.k,{justifyContent:"end",...n.UW},e.createElement(n.jW,{permissions:f.updateRole},e.createElement(vt,{to:`/settings/users-permissions/roles/${P.id}`,"aria-label":y({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${P.name}`})},e.createElement(Et.Z,null))),B(P)&&e.createElement(n.jW,{permissions:f.deleteRole},e.createElement(ft.h,{onClick:()=>Z(P.id),noBorder:!0,icon:e.createElement(xt.Z,null),label:y({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${P.name}`})})))))))},yt=pe;pe.defaultProps={canDelete:!1},pe.propTypes={onDelete:A().array.isRequired,permissions:A().object.isRequired,setRoleToDelete:A().func.isRequired,sortedRoles:A().array.isRequired,canDelete:A().bool};const Ct=async(s,l)=>{try{const{get:f}=(0,n.tg)(),{data:E}=await f("/users-permissions/roles");return l("The roles have loaded successfully"),E}catch(f){throw s({type:"warning",message:{id:"notification.error"}}),new Error(f)}},Pt=async(s,l)=>{try{const{del:f}=(0,n.tg)();await f(`/users-permissions/roles/${s}`)}catch{l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}},Mt=()=>{const{trackUsage:s}=(0,n.rS)(),{formatMessage:l,locale:f}=(0,v.Z)(),E=(0,n.lm)(),{notifyStatus:b}=(0,lt.G)(),[{query:y}]=(0,n.Kx)(),L=y?._q||"",[D,j]=(0,e.useState)(!1),[B,Z]=(0,e.useState)(!1),[I,P]=(0,e.useState)();(0,n.go)();const{isLoading:W,allowedActions:{canRead:w,canDelete:Y}}=(0,n.ss)({create:r._.createRole,read:r._.readRoles,update:r._.updateRole,delete:r._.deleteRole}),{isLoading:k,data:{roles:H},isFetching:oe,refetch:X}=(0,O.useQuery)("get-roles",()=>Ct(E,b),{initialData:{},enabled:w}),{includes:Ae}=(0,n.L0)(f,{sensitivity:"base"}),Te=(0,n.Xe)(f,{sensitivity:"base"}),Le=k||oe,At=()=>{j(!D)},Tt={roles:{id:(0,ne.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,ne.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Lt=l({id:"global.roles",defaultMessage:"Roles"}),jt=(0,O.useMutation)(Q=>Pt(Q,E),{async onSuccess(){await X()}}),Dt=async()=>{Z(!0),await jt.mutateAsync(I),j(!D),Z(!1)},ie=(H||[]).filter(Q=>Ae(Q.name,L)||Ae(Q.description,L)).sort((Q,je)=>Te.compare(Q.name,je.name)||Te.compare(Q.description,je.description)),Ot=L&&!ie.length?"search":"roles",Bt=4,St=(H?.length||0)+1;return e.createElement(dt.A,null,e.createElement(n.SL,{name:Lt}),e.createElement(o.o,{"aria-busy":Le},e.createElement(d.T,{title:l({id:"global.roles",defaultMessage:"Roles"}),subtitle:l({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:e.createElement(n.jW,{permissions:r._.createRole},e.createElement(n.Qj,{to:"/settings/users-permissions/roles/new",onClick:()=>s("willCreateRole"),startIcon:e.createElement(gt.Z,null),size:"S"},l({id:(0,ne.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),e.createElement(ct.Z,{startActions:e.createElement(n.m,{label:l({id:"app.component.search.label",defaultMessage:"Search"})})}),e.createElement(x.D,null,!w&&e.createElement(n.ZF,null),(Le||W)&&e.createElement(n.dO,null),w&&ie&&ie?.length?e.createElement(ut.i,{colCount:Bt,rowCount:St},e.createElement(mt.h,null,e.createElement(be.Tr,null,e.createElement(z.Th,null,e.createElement(p.Z,{variant:"sigma",textColor:"neutral600"},l({id:"global.name",defaultMessage:"Name"}))),e.createElement(z.Th,null,e.createElement(p.Z,{variant:"sigma",textColor:"neutral600"},l({id:"global.description",defaultMessage:"Description"}))),e.createElement(z.Th,null,e.createElement(p.Z,{variant:"sigma",textColor:"neutral600"},l({id:"global.users",defaultMessage:"Users"}))),e.createElement(z.Th,null,e.createElement(ee.T,null,l({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(yt,{sortedRoles:ie,canDelete:Y,permissions:r._,setRoleToDelete:P,onDelete:[D,j]})):e.createElement(n.x7,{content:Tt[Ot]})),e.createElement(n.QH,{isConfirmButtonLoading:B,onConfirm:Dt,onToggleDialog:At,isOpen:D})))},Rt=()=>e.createElement(n.O4,{permissions:r._.accessRoles},e.createElement(Mt,null)),bt=()=>e.createElement(n.O4,{permissions:r._.accessRoles},e.createElement(a.rs,null,e.createElement(a.AW,{path:"/settings/users-permissions/roles/new",component:at,exact:!0}),e.createElement(a.AW,{path:"/settings/users-permissions/roles/:id",component:it,exact:!0}),e.createElement(a.AW,{path:"/settings/users-permissions/roles",component:Rt,exact:!0}),e.createElement(a.AW,{path:"",component:n.Hn})))},62111:(c,u,t)=>{"use strict";t.d(u,{YX:()=>r,OB:()=>o.Z});var e=t(41609),n=t.n(e);const r=d=>Object.keys(d).reduce((i,x)=>{const h=d[x].controllers,p=Object.keys(h).reduce((T,R)=>(n()(h[R])||(T[R]=h[R]),T),{});return n()(p)||(i[x]={controllers:p}),i},{});var o=t(74871)},47443:(c,u,t)=>{var e=t(42118);function n(a,r){var o=a==null?0:a.length;return!!o&&e(a,r,0)>-1}c.exports=n},1196:c=>{function u(t,e,n){for(var a=-1,r=t==null?0:t.length;++a<r;)if(n(e,t[a]))return!0;return!1}c.exports=u},20731:(c,u,t)=>{var e=t(88668),n=t(47443),a=t(1196),r=t(29932),o=t(7518),d=t(74757),i=200;function x(h,p,T,R){var m=-1,g=n,M=!0,C=h.length,v=[],O=p.length;if(!C)return v;T&&(p=r(p,o(T))),R?(g=a,M=!1):p.length>=i&&(g=d,M=!1,p=new e(p));e:for(;++m<C;){var S=h[m],A=T==null?S:T(S);if(S=R||S!==0?S:0,M&&A===A){for(var N=O;N--;)if(p[N]===A)continue e;v.push(S)}else g(p,A,R)||v.push(S)}return v}c.exports=x},89881:(c,u,t)=>{var e=t(47816),n=t(99291),a=n(e);c.exports=a},41848:c=>{function u(t,e,n,a){for(var r=t.length,o=n+(a?1:-1);a?o--:++o<r;)if(e(t[o],o,t))return o;return-1}c.exports=u},42118:(c,u,t)=>{var e=t(41848),n=t(62722),a=t(42351);function r(o,d,i){return d===d?a(o,d,i):e(o,n,i)}c.exports=r},62722:c=>{function u(t){return t!==t}c.exports=u},69199:(c,u,t)=>{var e=t(89881),n=t(98612);function a(r,o){var d=-1,i=n(r)?Array(r.length):[];return e(r,function(x,h,p){i[++d]=o(x,h,p)}),i}c.exports=a},82689:(c,u,t)=>{var e=t(29932),n=t(97786),a=t(67206),r=t(69199),o=t(71131),d=t(7518),i=t(85022),x=t(6557),h=t(1469);function p(T,R,m){R.length?R=e(R,function(C){return h(C)?function(v){return n(v,C.length===1?C[0]:C)}:C}):R=[x];var g=-1;R=e(R,d(a));var M=r(T,function(C,v,O){var S=e(R,function(A){return A(C)});return{criteria:S,index:++g,value:C}});return o(M,function(C,v){return i(C,v,m)})}c.exports=p},71131:c=>{function u(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}c.exports=u},26393:(c,u,t)=>{var e=t(33448);function n(a,r){if(a!==r){var o=a!==void 0,d=a===null,i=a===a,x=e(a),h=r!==void 0,p=r===null,T=r===r,R=e(r);if(!p&&!R&&!x&&a>r||x&&h&&T&&!p&&!R||d&&h&&T||!o&&T||!i)return 1;if(!d&&!x&&!R&&a<r||R&&o&&i&&!d&&!x||p&&o&&i||!h&&i||!T)return-1}return 0}c.exports=n},85022:(c,u,t)=>{var e=t(26393);function n(a,r,o){for(var d=-1,i=a.criteria,x=r.criteria,h=i.length,p=o.length;++d<h;){var T=e(i[d],x[d]);if(T){if(d>=p)return T;var R=o[d];return T*(R=="desc"?-1:1)}}return a.index-r.index}c.exports=n},99291:(c,u,t)=>{var e=t(98612);function n(a,r){return function(o,d){if(o==null)return o;if(!e(o))return a(o,d);for(var i=o.length,x=r?i:-1,h=Object(o);(r?x--:++x<i)&&d(h[x],x,h)!==!1;);return o}}c.exports=n},42351:c=>{function u(t,e,n){for(var a=n-1,r=t.length;++a<r;)if(t[a]===e)return a;return-1}c.exports=u},35161:(c,u,t)=>{var e=t(29932),n=t(67206),a=t(69199),r=t(1469);function o(d,i){var x=r(d)?e:a;return x(d,n(i,3))}c.exports=o},89734:(c,u,t)=>{var e=t(21078),n=t(82689),a=t(5976),r=t(16612),o=a(function(d,i){if(d==null)return[];var x=i.length;return x>1&&r(d,i[0],i[1])?i=[]:x>2&&r(i[0],i[1],i[2])&&(i=[i[0]]),n(d,e(i,1),[])});c.exports=o},13217:(c,u,t)=>{var e=t(14259);function n(a){var r=a==null?0:a.length;return r?e(a,1,r):[]}c.exports=n},69572:(c,u,t)=>{var e=t(14259),n=t(40554);function a(r,o,d){return r&&r.length?(o=d||o===void 0?1:n(o),e(r,0,o<0?0:o)):[]}c.exports=a},82569:(c,u,t)=>{var e=t(20731),n=t(5976),a=t(29246),r=n(function(o,d){return a(o)?e(o,d):[]});c.exports=r},63128:(c,u,t)=>{"use strict";t.d(u,{U:()=>R,y:()=>p});var e=t(2790),n=t(53547),a=t(88972),r=t(7535),o=t(73879),d=t(78549),i=t(75878),x=t(50781);const h=({theme:m,expanded:g,variant:M,disabled:C,error:v})=>v?`1px solid ${m.colors.danger600} !important`:C?`1px solid ${m.colors.neutral150}`:g?`1px solid ${m.colors.primary600}`:M==="primary"?`1px solid ${m.colors.neutral0}`:`1px solid ${m.colors.neutral100}`,p=(0,a.ZP)(d.Z)``,T=(0,a.ZP)(x.x)`
  border: ${h};

  &:hover:not([aria-disabled='true']) {
    border: 1px solid ${({theme:m})=>m.colors.primary600};

    ${p} {
      color: ${({theme:m,expanded:g})=>g?void 0:m.colors.primary700};
    }

    ${d.Z} {
      color: ${({theme:m,expanded:g})=>g?void 0:m.colors.primary600};
    }

    & > ${i.k} {
      background: ${({theme:m})=>m.colors.primary100};
    }

    [data-strapi-dropdown='true'] {
      background: ${({theme:m})=>m.colors.primary200};
    }
  }
`,R=({children:m,disabled:g=!1,error:M,expanded:C=!1,hasErrorMessage:v=!0,id:O,onToggle:S,toggle:A,size:N="M",variant:$="primary",shadow:K})=>{const U=(0,o.M)(O),J=n.useMemo(()=>({expanded:C,onToggle:S,toggle:A,id:U,size:N,variant:$,disabled:g}),[g,C,U,S,N,A,$]);return(0,e.jsxs)(r.S.Provider,{value:J,children:[(0,e.jsx)(T,{"data-strapi-expanded":C,disabled:g,"aria-disabled":g,expanded:C,hasRadius:!0,variant:$,error:M,shadow:K,children:m}),M&&v&&(0,e.jsx)(x.x,{paddingTop:1,children:(0,e.jsx)(d.Z,{variant:"pi",textColor:"danger600",children:M})})]})}},37362:(c,u,t)=>{"use strict";t.d(u,{v:()=>r});var e=t(2790),n=t(7535),a=t(50781);const r=({children:o,...d})=>{const{expanded:i,id:x}=(0,n.A)();if(!i)return null;const h=`accordion-content-${x}`,p=`accordion-label-${x}`,T=`accordion-desc-${x}`;return(0,e.jsx)(a.x,{role:"region",id:h,"aria-labelledby":p,"aria-describedby":T,...d,children:o})}},7535:(c,u,t)=>{"use strict";t.d(u,{A:()=>a,S:()=>n});var e=t(53547);const n=(0,e.createContext)({disabled:!1,expanded:!1,id:"",size:"M",variant:"primary"}),a=()=>(0,e.useContext)(n)},27375:(c,u,t)=>{"use strict";t.d(u,{B:()=>m});var e=t(2790),n=t(21514),a=t(88972),r=t(63128),o=t(7535);const d=({expanded:g,disabled:M,variant:C})=>{let v="neutral100";return g?v="primary100":M?v="neutral150":C==="primary"&&(v="neutral0"),v};var i=t(90139),x=t(80907),h=t(75878),p=t(78549);const T=(0,a.ZP)(i.A)`
  text-align: left;

  // necessary to make the ellipsis prop work on the title
  > span {
    max-width: 100%;
  }

  svg {
    width: ${14/16}rem;
    height: ${14/16}rem;

    path {
      fill: ${({theme:g,expanded:M})=>M?g.colors.primary600:g.colors.neutral500};
    }
  }
`,R=(0,a.ZP)(h.k)`
  min-height: ${({theme:g,size:M})=>g.sizes.accordions[M]};
  border-radius: ${({theme:g,expanded:M})=>M?`${g.borderRadius} ${g.borderRadius} 0 0`:g.borderRadius};

  &:hover {
    svg {
      path {
        fill: ${({theme:g})=>g.colors.primary600};
      }
    }
  }
`,m=({title:g,description:M,as:C="span",togglePosition:v="right",action:O,...S})=>{const{onToggle:A,toggle:N,expanded:$,id:K,size:U,variant:J,disabled:G}=(0,o.A)(),le=`accordion-content-${K}`,se=`accordion-label-${K}`,de=`accordion-desc-${K}`,V=U==="M"?6:4,ae=U==="M"?V:V-2,he=d({expanded:$,disabled:G,variant:J}),ce={as:C,fontWeight:U==="S"?"bold":void 0,id:se,textColor:$?"primary600":"neutral700",ellipsis:!0,variant:U==="M"?"delta":void 0},F=$?"primary600":"neutral600",ue=$?"primary200":"neutral200",q=U==="M"?`${32/16}rem`:`${24/16}rem`,_=()=>{G||(N&&!A?(console.warn('Deprecation warning: Usage of "toggle" prop in Accordion component is deprecated. This is discouraged and will be removed in the next major release. Please use "onToggle" instead'),N()):A&&A())},ee=(0,e.jsx)(h.k,{justifyContent:"center",borderRadius:"50%",height:q,width:q,transform:$?"rotate(180deg)":void 0,"data-strapi-dropdown":!0,"aria-hidden":!0,as:"span",background:ue,cursor:G?"not-allowed":"pointer",onClick:_,shrink:0,children:(0,e.jsx)(x.J,{as:n.Z,width:U==="M"?`${11/16}rem`:`${8/16}rem`,color:$?"primary600":"neutral600"})});return(0,e.jsx)(R,{paddingBottom:ae,paddingLeft:V,paddingRight:V,paddingTop:ae,background:he,expanded:$,size:U,justifyContent:"space-between",cursor:G?"not-allowed":"",children:(0,e.jsxs)(h.k,{gap:3,flex:1,maxWidth:"100%",children:[v==="left"&&ee,(0,e.jsx)(T,{onClick:_,"aria-disabled":G,"aria-expanded":$,"aria-controls":le,"aria-labelledby":se,"data-strapi-accordion-toggle":!0,expanded:$,type:"button",flex:1,minWidth:0,...S,children:(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(r.y,{...ce,children:g}),M&&(0,e.jsx)(p.Z,{as:"p",id:de,textColor:F,children:M})]})}),v==="right"&&(0,e.jsxs)(h.k,{gap:3,children:[ee,O]}),v==="left"&&O]})})}},15483:(c,u,t)=>{"use strict";t.d(u,{Z:()=>a});var e=t(2790),n=t(75878);const a=({startActions:r,endActions:o})=>!r&&!o?null:(0,e.jsxs)(n.k,{justifyContent:"space-between",alignItems:"flex-start",paddingBottom:4,paddingLeft:10,paddingRight:10,children:[(0,e.jsx)(n.k,{gap:2,wrap:"wrap",children:r}),(0,e.jsx)(n.k,{gap:2,shrink:0,wrap:"wrap",children:o})]})},26789:(c,u,t)=>{"use strict";t.d(u,{D:()=>a});var e=t(2790),n=t(50781);const a=({children:r})=>(0,e.jsx)(n.x,{paddingLeft:10,paddingRight:10,children:r})},79371:(c,u,t)=>{"use strict";t.d(u,{T:()=>p});var e=t(2790),n=t(53547),a=t(88972);const r=m=>{const g=(0,n.useRef)(null),[M,C]=(0,n.useState)(!0),v=([O])=>{C(O.isIntersecting)};return(0,n.useEffect)(()=>{const O=g.current,S=new IntersectionObserver(v,m);return O&&S.observe(g.current),()=>{O&&S.disconnect()}},[g,m]),[g,M]};var o=t(79698);const d=(m,g)=>{const M=(0,o.W)(g);(0,n.useLayoutEffect)(()=>{const C=new ResizeObserver(M);return Array.isArray(m)?m.forEach(v=>{v.current&&C.observe(v.current)}):m.current&&C.observe(m.current),()=>{C.disconnect()}},[m,M])};var i=t(50781),x=t(75878),h=t(78549);const p=m=>{const g=(0,n.useRef)(null),[M,C]=(0,n.useState)(null),[v,O]=r({root:null,rootMargin:"0px",threshold:0});return d(v,()=>{v.current&&C(v.current.getBoundingClientRect())}),(0,n.useEffect)(()=>{g.current&&C(g.current.getBoundingClientRect())},[g]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:M?.height},ref:v,children:O&&(0,e.jsx)(R,{ref:g,...m})}),!O&&(0,e.jsx)(R,{...m,sticky:!0,width:M?.width})]})};p.displayName="HeaderLayout";const T=(0,a.ZP)(i.x)`
  width: ${({width:m})=>m?`${m/16}rem`:void 0};
  z-index: ${({theme:m})=>m.zIndices[1]};
`,R=n.forwardRef(({navigationAction:m,primaryAction:g,secondaryAction:M,subtitle:C,title:v,sticky:O,width:S,...A},N)=>{const $=typeof C=="string";return O?(0,e.jsx)(T,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:S,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(x.k,{justifyContent:"space-between",children:[(0,e.jsxs)(x.k,{children:[m&&(0,e.jsx)(i.x,{paddingRight:3,children:m}),(0,e.jsxs)(i.x,{children:[(0,e.jsx)(h.Z,{variant:"beta",as:"h1",...A,children:v}),$?(0,e.jsx)(h.Z,{variant:"pi",textColor:"neutral600",children:C}):C]}),M?(0,e.jsx)(i.x,{paddingLeft:4,children:M}):null]}),(0,e.jsx)(x.k,{children:g?(0,e.jsx)(i.x,{paddingLeft:2,children:g}):void 0})]})}):(0,e.jsxs)(i.x,{ref:N,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:m?6:8,background:"neutral100","data-strapi-header":!0,children:[m?(0,e.jsx)(i.x,{paddingBottom:2,children:m}):null,(0,e.jsxs)(x.k,{justifyContent:"space-between",children:[(0,e.jsxs)(x.k,{minWidth:0,children:[(0,e.jsx)(h.Z,{as:"h1",variant:"alpha",...A,children:v}),M?(0,e.jsx)(i.x,{paddingLeft:4,children:M}):null]}),g]}),$?(0,e.jsx)(h.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:C}):C]})})},45349:(c,u,t)=>{"use strict";t.d(u,{A:()=>d});var e=t(2790),n=t(88972),a=t(50781);const r=(0,n.ZP)(a.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:i})=>i?"auto 1fr":"1fr"};
`,o=(0,n.ZP)(a.x)`
  overflow-x: hidden;
`,d=({sideNav:i,children:x})=>(0,e.jsxs)(r,{hasSideNav:!!i,children:[i,(0,e.jsx)(o,{paddingBottom:10,children:x})]})},57713:(c,u,t)=>{"use strict";t.d(u,{o:()=>o});var e=t(2790),n=t(88972),a=t(50781);const r=(0,n.ZP)(a.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,o=({labelledBy:d="main-content-title",...i})=>(0,e.jsx)(r,{"aria-labelledby":d,as:"main",id:"main-content",tabIndex:-1,...i})},60793:(c,u,t)=>{"use strict";t.d(u,{Z:()=>a});var e=t(2790);const n=r=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...r,children:(0,e.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),a=n},80606:(c,u,t)=>{"use strict";t.d(u,{Z:()=>a});var e=t(2790);const n=r=>(0,e.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...r,children:(0,e.jsx)("path",{fill:"#212134",fillRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 0 0-.374.68v1.65a.797.797 0 0 0 .384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 0 0 .216.744l1.167 1.166a.801.801 0 0 0 .744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 0 0 .679.374h1.649a.797.797 0 0 0 .686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 0 0 .744-.216l1.166-1.167a.803.803 0 0 0 .216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 0 0 .374-.679v-1.649a.796.796 0 0 0-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 0 0-.216-.744l-1.166-1.173a.802.802 0 0 0-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 0 0-.68-.374h-1.65a.797.797 0 0 0-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 0 0-.744.216L2.921 4.094a.802.802 0 0 0-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8ZM12 17a5 5 0 1 0 0-10 5 5 0 0 0 0 10Z",clipRule:"evenodd"})}),a=n}}]);
